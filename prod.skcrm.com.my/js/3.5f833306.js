(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0726":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("q-layout",{staticClass:" rounded-borders",staticStyle:{height:"100%"},attrs:{view:"lHh lpr lFf"}},[t.form.drawingNumber?e("q-chip",{attrs:{color:"primary","text-color":"white"}},[t._v("\n      "+t._s(t.form.drawingNumber)+"\n    ")]):t._e(),e("q-chip",{attrs:{color:"primary","text-color":"white"}},[t._v("\n      "+t._s(t.form.referenceName)+"\n    ")]),e("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Customised Furniture\n    ")]),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Quantity\n          ")]),e("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            UOM\n          ")]),e("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Model\n          ")]),e("div",{staticClass:"col-4 text-weight-bold"},[t._v("\n            Description\n          ")]),e("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Amount (RM)\n          ")])]),e("q-list",t._l(t.quotationItem,(function(s){return e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s.uuid,attrs:{clickable:""},on:{click:function(e){return t.showChildren(s)}}},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n                "+t._s(s.quantity)+"\n              ")]),e("div",{staticClass:"col-2"},[t._v("\n                Unit\n              ")]),e("div",{staticClass:"col-2"},[t._v("\n                "+t._s(s.productNumber)+"\n              ")]),e("div",{staticClass:"col-4"},[t._v("\n                "+t._s(s.brandGoodName)+"\n              ")]),e("div",{staticClass:"col-2"},[t._v("\n                "+t._s(Math.ceil(s.recommendedRetailPrice.toFixed(2)))+"\n              ")]),e("q-separator",{staticClass:"q-my-sm"})],1)])})),1),e("div",{staticClass:"row"},[e("div",{staticClass:"col-7 q-ml-xl text-weight-bold"}),e("div",{staticClass:"col-2"},[e("q-input",{staticClass:"q-pb-none q-gutter-sm row justify-center items-center",attrs:{type:"number",label:"Discount (%)"},on:{change:t.onChangeMasterItemDiscount},model:{value:t.masterItemDiscount,callback:function(s){t.masterItemDiscount=t._n(s)},expression:"masterItemDiscount"}})],1),e("div",{staticClass:"col-2"},[e("q-input",{staticClass:"q-pb-none q-ml-sm q-gutter-sm row justify-center items-center",attrs:{label:"Total Price (RM)",disable:""},model:{value:t.form.totalPriceDrawingItems,callback:function(s){t.$set(t.form,"totalPriceDrawingItems",s)},expression:"form.totalPriceDrawingItems"}})],1)])],1)],1),e("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Optional Items\n    ")]),t.baskets.length?e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Basket\n        ")]),t.baskets.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Model\n            ")]),e("div",{staticClass:"col-4"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Amount(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.baskets,(function(s){return e("div",{key:s.uuid,staticClass:"row full-width q-mb-sm"},[e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.quantity)+"\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Unit\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              "+t._s(s.productNumber)+"\n            ")]),e("div",{staticClass:"col-4"},[t._v("\n              "+t._s(s.brandGoodName)+"\n            ")]),e("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(Math.ceil(s.recommendedRetailPrice.toFixed(2)))+"\n            ")])])}))],2):t._e()])],1):t._e(),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Worktop\n        ")]),e("div",{staticClass:"row q-gutter-sm justify"},[e("div",{staticClass:"col-3"},[e("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.worktop,label:"Category"},model:{value:t.selectedWorktop,callback:function(s){t.selectedWorktop=s},expression:"selectedWorktop"}})],1),e("div",{staticClass:"col-6"},[e("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWorktopItems,label:"Name"},model:{value:t.form.worktopItem,callback:function(s){t.$set(t.form,"worktopItem",s)},expression:"form.worktopItem"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(s){return t.onClickAddTradingItem(t.form.worktopItem)}}})],1)]),t.worktops.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Amount(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.worktops,(function(s){return e("div",{key:s.uuid,staticClass:"row full-width"},[e("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"worktop.quantity"}}),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.uom)+"\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.itemcode)+"\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              "+t._s(s.name)+"\n            ")]),e("q-input",{staticClass:"col-1",attrs:{dense:"",borderless:"",label:"Discount(%)"},on:{change:function(e){return t.onChangeOptionalItemTotalPrice(s,e)}},model:{value:s.discount,callback:function(e){t.$set(s,"discount",e)},expression:"worktop.discount"}}),e("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(s))+"\n            ")]),e("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDelete(s.uuid)}}})],1)}))],2):t._e()])],1),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Kitchen Appliances\n        ")]),e("div",{staticClass:"row q-gutter-sm justify"},[e("div",{staticClass:"col-3"},[e("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.kitchenAppliances,label:"Subcategory"},model:{value:t.selectedKitchenAppliances,callback:function(s){t.selectedKitchenAppliances=s},expression:"selectedKitchenAppliances"}})],1),e("div",{staticClass:"col-6"},[e("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredKitchenAppliances,label:"Name"},model:{value:t.form.kitchenAppliancesItem,callback:function(s){t.$set(t.form,"kitchenAppliancesItem",s)},expression:"form.kitchenAppliancesItem"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(s){return t.onClickAddTradingItem(t.form.kitchenAppliancesItem)}}})],1)]),t.kitchens.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.kitchens,(function(s){return e("div",{key:s.uuid,staticClass:"row full-width"},[e("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"kitchen.quantity"}}),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.uom)+"\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.itemcode)+"\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              "+t._s(s.name)+"\n            ")]),e("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}],"lazy-rules":""},on:{change:function(e){return t.onChangeOptionalItemTotalPrice(s,e)}},model:{value:s.discount,callback:function(e){t.$set(s,"discount",t._n(e))},expression:"kitchen.discount"}}),e("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(s))+"\n            ")]),e("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDelete(s.uuid)}}})],1)}))],2):t._e()])],1),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Sink & Tap\n        ")]),e("div",{staticClass:"row q-gutter-sm justify"},[e("div",{staticClass:"col-3"},[e("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.sinkAndTap,label:"Category"},model:{value:t.selectedSinkAndTap,callback:function(s){t.selectedSinkAndTap=s},expression:"selectedSinkAndTap"}})],1),e("div",{staticClass:"col-6"},[e("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredSinkAndTapItems,label:"Name"},model:{value:t.form.sinkAndTapItem,callback:function(s){t.$set(t.form,"sinkAndTapItem",s)},expression:"form.sinkAndTapItem"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(s){return t.onClickAddTradingItem(t.form.sinkAndTapItem)}}})],1)]),t.sinks.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.sinks,(function(s){return e("div",{key:s.uuid,staticClass:"row full-width"},[e("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"sink.quantity"}}),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.uom)+"\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.itemcode)+"\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              "+t._s(s.name)+"\n            ")]),e("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(e){return t.onChangeOptionalItemTotalPrice(s,e)}},model:{value:s.discount,callback:function(e){t.$set(s,"discount",t._n(e))},expression:"sink.discount"}}),e("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(s))+"\n            ")]),e("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDelete(s.uuid)}}})],1)}))],2):t._e()])],1),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Fitting and Accessories\n        ")]),e("div",{staticClass:"row q-gutter-sm justify"},[e("div",{staticClass:"col-3"},[e("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.fittingAndAccessories,label:"Category"},model:{value:t.selectedFittingAndAccessories,callback:function(s){t.selectedFittingAndAccessories=s},expression:"selectedFittingAndAccessories"}})],1),e("div",{staticClass:"col-6"},[e("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredFittingAndAccessoriesItems,label:"Name"},model:{value:t.form.fittingAndAccessoriesItem,callback:function(s){t.$set(t.form,"fittingAndAccessoriesItem",s)},expression:"form.fittingAndAccessoriesItem"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(s){return t.onClickAddTradingItem(t.form.fittingAndAccessoriesItem)}}})],1)]),t.fittingAndAccessories.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.fittingAndAccessories,(function(s){return e("div",{key:s.uuid,staticClass:"row full-width"},[e("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"worktop.quantity"}}),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.uom)+"\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.itemcode)+"\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              "+t._s(s.name)+"\n            ")]),e("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(e){return t.onChangeOptionalItemTotalPrice(s,e)}},model:{value:s.discount,callback:function(e){t.$set(s,"discount",t._n(e))},expression:"worktop.discount"}}),e("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(s))+"\n            ")]),e("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDelete(s.uuid)}}})],1)}))],2):t._e()])],1),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Wall Cladding\n        ")]),e("div",{staticClass:"row q-gutter-sm justify"},[e("div",{staticClass:"col-3"},[e("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.wallCladding,label:"Category"},model:{value:t.selectedWallCladding,callback:function(s){t.selectedWallCladding=s},expression:"selectedWallCladding"}})],1),e("div",{staticClass:"col-6"},[e("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWallCladdingItems,label:"Name"},model:{value:t.form.wallCladdingItem,callback:function(s){t.$set(t.form,"wallCladdingItem",s)},expression:"form.wallCladdingItem"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(s){return t.onClickAddTradingItem(t.form.wallCladdingItem)}}})],1)]),t.wallCladding.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.wallCladding,(function(s){return e("div",{key:s.uuid,staticClass:"row full-width"},[e("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"worktop.quantity"}}),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.uom)+"\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.itemcode)+"\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              "+t._s(s.name)+"\n            ")]),e("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(e){return t.onChangeOptionalItemTotalPrice(s,e)}},model:{value:s.discount,callback:function(e){t.$set(s,"discount",t._n(e))},expression:"worktop.discount"}}),e("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(s))+"\n            ")]),e("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDelete(s.uuid)}}})],1)}))],2):t._e()])],1),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Worktop Slab\n        ")]),e("div",{staticClass:"row q-gutter-sm justify"},[e("div",{staticClass:"col-3"},[e("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.worktopSlab,label:"Category"},model:{value:t.selectedWorktopSlab,callback:function(s){t.selectedWorktopSlab=s},expression:"selectedWorktopSlab"}})],1),e("div",{staticClass:"col-6"},[e("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWorktopSlabItems,label:"Name"},model:{value:t.form.worktopSlabItem,callback:function(s){t.$set(t.form,"worktopSlabItem",s)},expression:"form.worktopSlabItem"}})],1),e("div",{staticClass:"col-2"},[e("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(s){return t.onClickAddTradingItem(t.form.worktopSlabItem)}}})],1)]),t.worktopSlabs.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.worktopSlabs,(function(s){return e("div",{key:s.uuid,staticClass:"row full-width"},[e("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"worktop.quantity"}}),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.uom)+"\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              "+t._s(s.itemcode)+"\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              "+t._s(s.name)+"\n            ")]),e("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(e){return t.onChangeOptionalItemTotalPrice(s,e)}},model:{value:s.discount,callback:function(e){t.$set(s,"discount",t._n(e))},expression:"worktop.discount"}}),e("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(s))+"\n            ")]),e("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDelete(s.uuid)}}})],1)}))],2):t._e()])],1),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Others\n        ")]),e("div",{staticClass:"row q-gutter-sm justify"},[e("q-space"),e("div",{staticClass:"col-1"},[e("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:t.onClickAddOtherItems}})],1)],1),t.otherItems.length?e("div",{staticClass:"row q-mt-md"},[e("div",{staticClass:"row full-width justify q-gutter-sm"},[e("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),e("div",{staticClass:"col-2"},[t._v("\n              Code / Model\n            ")]),e("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Unit Price(RM)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),e("div",{staticClass:"col-1"},[t._v("\n              Discounted Price(RM)\n            ")]),e("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.otherItems,(function(s,i){return e("div",{key:i,staticClass:"row full-width justify items-top q-gutter-sm",staticStyle:{"margin-top":"1.4em","margin-right":"3em"}},[e("div",{staticClass:"col-1"},[e("q-input",{attrs:{type:"number",outlined:"",placeholder:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(e){return t.onChangeOtherItemTotalPrice(s,e)}},model:{value:s.quantity,callback:function(e){t.$set(s,"quantity",t._n(e))},expression:"otherItem.quantity"}})],1),e("div",{staticClass:"col-1"},[e("q-input",{attrs:{type:"text",outlined:"",placeholder:"UOM","stack-label":""},model:{value:s.UOM,callback:function(e){t.$set(s,"UOM",e)},expression:"otherItem.UOM"}})],1),e("div",{staticClass:"col-2"},[e("q-input",{attrs:{type:"text",outlined:"",placeholder:"Code / Model","stack-label":""},model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"otherItem.name"}})],1),e("div",{staticClass:"col-3"},[e("q-input",{attrs:{type:"text",outlined:"",placeholder:"Description",autogrow:""},model:{value:s.description,callback:function(e){t.$set(s,"description",e)},expression:"otherItem.description"}})],1),e("div",{staticClass:"col-1"},[e("q-input",{attrs:{type:"number",outlined:"",placeholder:"Unit Price",rules:[function(t){return t>=0}]},on:{change:function(e){return t.onChangeOtherItemTotalPrice(s,e)}},model:{value:s.unitPrice,callback:function(e){t.$set(s,"unitPrice",t._n(e))},expression:"otherItem.unitPrice"}})],1),e("div",{staticClass:"col-1"},[e("q-input",{attrs:{type:"number",outlined:"",placeholder:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(e){return t.onChangeOtherItemTotalPrice(s,e)}},model:{value:s.discount,callback:function(e){t.$set(s,"discount",t._n(e))},expression:"otherItem.discount"}})],1),e("div",{staticClass:"col-1 justify-center item-center q-gutter-sm",staticStyle:{margin:"2em"}},[t._v("\n              "+t._s(s.discountedPrice.toFixed(2))+"\n              ")]),e("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDeleteOtherItem(i)}}})],1)}))],2):t._e()])],1),e("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Detail Quotation Grand Total\n    ")]),e("q-card",{staticClass:"q-mt-md"},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Description\n          ")]),e("div",{staticClass:"col-8 text-weight-bold"}),e("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Amount (RM)\n          ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-2"},[t._v("\n            Customised Furniture\n          ")]),e("div",{staticClass:"col-8 text-weight-bold"}),e("div",{staticClass:"col-2"},[t._v("\n            "+t._s(Number(t.form.totalPriceDrawingItems).toFixed(2))+"\n          ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-2"},[t._v("\n            Optional Items\n          ")]),e("div",{staticClass:"col-8 text-weight-bold"}),e("div",{staticClass:"col-2"},[t._v("\n            "+t._s(Number(t.form.totalPriceTradingItems).toFixed(2))+"\n\n            ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-2"},[t._v("\n            Other Items\n          ")]),e("div",{staticClass:"col-8 text-weight-bold"}),e("div",{staticClass:"col-2"},[t._v("\n            "+t._s(t.form.totalPriceOtherItems.toFixed(2))+"\n\n            ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-10 text-weight-bold"}),e("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Grand Total (RM)\n          ")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-10 text-weight-bold"}),e("div",{staticClass:"col-2"},[t._v("\n            "+t._s(t.form.discountedTotalPrice.toFixed(2))+"\n\n            ")])])])],1),e("div",{staticClass:"q-mt-md",attrs:{align:"right"}},[e("q-btn",{attrs:{color:"primary",label:"Calculate"},on:{click:t.onClickConfirm}})],1)],1),e("q-dialog",{model:{value:t.isDialogShowChildrenOpen,callback:function(s){t.isDialogShowChildrenOpen=s},expression:"isDialogShowChildrenOpen"}},[e("q-card",{staticStyle:{"max-width":"1000px",width:"1000px"}},[e("q-card-section",[e("p",{staticClass:"text-h3 text-center"},[t._v("\n          "+t._s(t.itemToShowChildren.brandGoodName)+"\n        ")])]),e("q-card-section",{staticClass:"full-width"},[e("div",{staticClass:"row full-width"},[e("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Quantity\n          ")]),e("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            UOM\n          ")]),e("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            Model\n          ")]),e("div",{staticClass:"col-3 text-weight-bold text-center"},[t._v("\n            Description\n          ")]),e("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            Dimension\n          ")]),e("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            Material / Colour / Profile\n          ")])]),e("q-list",t._l(t.itemToShowChildren.children,(function(s){return e("q-item",{key:s.uuid},[e("div",{staticClass:"row full-width text-center"},[e("div",{staticClass:"col-1 text-center"},[t._v("\n                "+t._s(s.quantity||"-")+"\n              ")]),e("div",{staticClass:"col-2 text-center"},[t._v("\n                Unit\n              ")]),e("div",{staticClass:"col-2 text-center"},[t._v("\n                "+t._s(s.productNumber||"-")+"\n              ")]),e("div",{staticClass:"col-3"},[t._v("\n                "+t._s(s.brandGoodName||"-")+"\n              ")]),e("div",{staticClass:"col-2"},[t._v("\n                "+t._s(s.dimensions||"-")+"\n              ")]),e("div",{staticClass:"col-2"},[t._v("\n                "+t._s(s.materialName||"-")+"\n              ")]),e("q-separator",{staticClass:"q-my-sm"})],1)])})),1)],1)],1)],1)],1)},n=[],o=(e("c975"),e("ddb0"),e("ded3")),a=e.n(o),l=e("c973"),c=e.n(l),r=e("36dc"),d={components:{SelectWithFilter:r["a"]},data(){return{itemToShowChildren:{},isDialogShowChildrenOpen:!1,quotation:{},quotationItem:[],brandGoods:[],tradingItems:[],otherItems:[],masterItemDiscount:0,baskets:[],worktops:[],kitchens:[],sinks:[],fittingAndAccessories:[],wallCladding:[],worktopSlabs:[],form:{drawingNumber:"",totalPriceOriDrawingItems:0,totalPriceDrawingItems:0,discountedTotalPriceDrawingItems:0,totalPriceTradingItems:0,totalPrice:0,discountedTotalPrice:0,totalPriceOtherItems:0,totalInstallationCharges:null,transportationCharge:null,fittingAndAccessories:[],kitchenAppliances:"",kitchenAppliancesItem:"",sinkAndTap:"",sinkAndTapItem:"",selectedWorktop:"",worktopItem:"",fittingAndAccessoriesItem:"",wallCladdingItem:"",worktopSlabItem:""},options:{fittingAndAccessories:[],fittingAndAccessoriesItems:[],wallCladding:[],wallCladdingItems:[],kitchenAppliances:[],kitchenAppliancesItems:[],sinkAndTap:[],sinkAndTapItems:[],worktop:[],worktopItems:[],worktopSlab:[],worktopSlabItems:[],filteredWorktopItems:[],filteredKitchenAppliances:[],filteredSinkAndTap:[],filteredFittingAndAccessories:[],filteredWallCladding:[]},selectedWorktop:"",selectedSinkAndTap:"",selectedKitchenAppliances:"",selectedFittingAndAccessories:"",selectedWallCladding:"",selectedWorktopSlab:""}},computed:{validDiscount(t){return t>=0&&t<=100},customisedFurnitureTotalPrice(){return 0}},watch:{tradingItems(t,s){this.worktops=t.filter(t=>"Worktop"===t.category),this.kitchens=t.filter(t=>"Kitchen Appliances"===t.category),this.sinks=t.filter(t=>"Sink and Tap"===t.category),this.fittingAndAccessories=t.filter(t=>"Fitting and Accessories"===t.category),this.wallCladding=t.filter(t=>"Wall Cladding"===t.category),this.worktopSlabs=t.filter(t=>"Worktop Slab"===t.category)},selectedWorktop(t,s){this.options.filteredWorktopItems=this.options.worktopItems.filter(s=>s.subcategory===t)},selectedKitchenAppliances(t,s){this.options.filteredKitchenAppliances=this.options.kitchenAppliancesItems.filter(s=>s.subcategory===t)},selectedSinkAndTap(t,s){this.options.filteredSinkAndTapItems=this.options.sinkAndTapItems.filter(s=>s.subcategory===t)},selectedFittingAndAccessories(t,s){this.options.filteredFittingAndAccessoriesItems=this.options.fittingAndAccessoriesItems.filter(s=>s.subcategory===t)},selectedWallCladding(t,s){this.options.filteredWallCladdingItems=this.options.wallCladdingItems.filter(s=>s.subcategory===t)},selectedWorktopSlab(t,s){this.options.filteredWorktopSlabItems=this.options.worktopSlabItems.filter(s=>s.subcategory===t)}},created(){var t=this;return c()((function*(){if(t.quotation=yield t.$store.dispatch("GetDesigns",t.$route.params.designId),console.log("this.quotation: "+JSON.stringify(t.quotation)),t.form.referenceName=t.quotation.referenceName,t.form.drawingNumber=t.quotation.drawingNumber,t.form.totalPriceDrawingItems=t.quotation.totalPriceDrawingItems,t.form.totalPriceOriDrawingItems=t.quotation.totalPriceDrawingItems,t.form.totalPriceTradingItems=t.quotation.totalPriceTradingItems,t.form.totalInstallationCharges=t.quotation.totalInstallationCharges,t.form.transportationCharge=t.quotation.transportationCharge,t.form.totalPrice=t.quotation.totalPrice,t.form.discountedTotalPrice=t.quotation.discountedTotalPrice,t.form.totalPriceOtherItems=t.quotation.totalPriceOtherItems,t.quotation.quotationDetails&&(t.baskets=t.quotation.quotationDetails.filter(t=>"Basket"===t.subcategory),t.quotationItem=t.quotation.quotationDetails.filter(t=>"Basket"!==t.subcategory)),t.quotationItem){for(const s of t.quotationItem)s.dimensions=t.itemSizeToString(s.size);t.buildItemTree()}const s=yield t.$store.dispatch("GetTradingItems");if(t.options.wallCladding=t.getSubCategoryOptionsForCategory("Wall Cladding",s),t.options.wallCladdingItems=t.getTradingItemOptionsForCategory("Wall Cladding",s),t.options.fittingAndAccessories=t.getSubCategoryOptionsForCategory("Fitting and Accessories",s),t.options.fittingAndAccessoriesItems=t.getTradingItemOptionsForCategory("Fitting and Accessories",s),t.options.worktopSlab=t.getSubCategoryOptionsForCategory("Worktop Slab",s),t.options.worktopSlabItems=t.getTradingItemOptionsForCategory("Worktop Slab",s),t.options.worktop=t.getSubCategoryOptionsForCategory("Worktop",s),t.options.worktopItems=t.getTradingItemOptionsForCategory("Worktop",s),t.options.kitchenAppliances=t.getSubCategoryOptionsForCategory("Kitchen Appliances",s),t.options.kitchenAppliancesItems=t.getTradingItemOptionsForCategory("Kitchen Appliances",s),t.options.sinkAndTap=t.getSubCategoryOptionsForCategory("Sink and Tap",s),t.options.sinkAndTapItems=t.getTradingItemOptionsForCategory("Sink and Tap",s),t.quotation.tradingItems)for(const e of t.quotation.tradingItems){const s=a()(a()({},e),{},{quantity:e.designAdditionalItems[0].quantity,discount:100*e.designAdditionalItems[0].discount});"Worktop"===e.category?t.worktops.push(s):"Kitchen Appliances"===e.category?t.kitchens.push(s):"Sink and Tap"===e.category&&t.sinks.push(s),t.tradingItems.push(s)}if(t.quotation.designOtherItems)for(const e of t.quotation.designOtherItems)t.otherItems.push(e);console.log("form: "+JSON.stringify(t.form)),console.log("quotation",JSON.stringify(t.quotation)),console.log("this.quotation.designOtherItems: "+JSON.stringify(t.quotation.designOtherItems)),console.log("this.otherItems: "+t.otherItems)}))()},methods:{getTradingItemOptionsForCategory(t,s){return s.filter(s=>s.category===t).map(t=>{const s=[];return s.label=t.name+" | "+t.itemcode,s.value=t.uuid,s.subcategory=t.subcategory,s})},getSubCategoryOptionsForCategory(t,s){const e=s.filter(s=>s.category===t).map(t=>t.subcategory),i=[...new Set(e)];return i.map(t=>{const s=[];return s.label=t,s.value=t,s})},buildItemTree(){if(!this.quotationItem)return;const t=this.quotationItem.filter(t=>!!t.parentId);for(const s of t){const t=this.quotationItem.findIndex(t=>t.id===s.parentId);-1!==t&&(this.quotationItem[t].children||(this.quotationItem[t].children=[]),this.quotationItem[t].children.push(s))}this.quotationItem=this.quotationItem.filter(t=>!t.parentId)},showChildren(t){this.itemToShowChildren=t,this.isDialogShowChildrenOpen=!0},itemSizeToString(t){const{x:s,y:e,z:i}=t;return`${s} x ${i} x ${e}`},remove_duplicates(t){for(var s={},e=[],i=0;i<t.length;i++)t[i].label in s||(e.push(t[i]),s[t[i].label]=!0);return e},updateTotalPrice(){this.form.discountedTotalPrice=this.form.totalPriceTradingItems+this.form.totalPriceOtherItems+this.form.totalPriceDrawingItems},onClickAddTradingItem(t){var s=this;return c()((function*(){if(!t)return;const e=yield s.$store.dispatch("GetTradingItems"),[i]=e.filter(s=>s.uuid===t),n=(i.stdcost*i.markuprate).toFixed(2);s.$notify("success","Successfully add "+i.name),s.tradingItems.push(a()(a()({},i),{},{quantity:1,discount:0})),s.form.totalPriceTradingItems+=n,s.updateTotalPrice()}))()},onClickAddOtherItems(){this.otherItems.push({uuid:"",quantity:0,UOM:"Unit",name:"",description:"",unitPrice:0,discount:0,discountedPrice:0})},onDelete(t){const s=this.tradingItems.map(t=>t.uuid).indexOf(t);this.form.totalPriceTradingItems-=Math.ceil(this.tradingItems[s].discountedPrice),this.tradingItems=this.tradingItems.filter(s=>s.uuid!==t),this.updateTotalPrice(),this.$notify("success","Successfully deleted")},onDeleteOtherItem(t){this.form.totalPriceOtherItems-=this.otherItems[t].discountedPrice,this.otherItems=this.otherItems.filter(s=>s!==this.otherItems[t]),this.updateTotalPrice(),this.$notify("success","Successfully deleted an item in Other section")},displayOptionalItemDiscountedPrice(t){return 0},calcItemDiscountedPrice(t){const s=((t.stdcost*t.markuprate).toFixed(2)*t.quantity*((100-t.discount)/100)).toFixed(2);return t.discountedPrice=s,s},onChangeOptionalItemTotalPrice(t,s){let e=0;const i=[this.worktops,this.kitchens,this.sinks,this.fittingAndAccessories,this.wallCladding,this.worktopSlabs];for(const n of i)for(let t=0;t<n.length;t++)n[t].discountedPrice&&(e+=n[t].discountedPrice);this.form.totalPriceTradingItems=e,this.updateTotalPrice(),console.log(this.form.discountedTotalPrice)},calcOtherItemDiscountedPrice(t){let s=(t.quantity*t.unitPrice*((100-t.discount)/100)).toFixed(2);return s=parseFloat(s),t.discountedPrice=s,s},onChangeOtherItemTotalPrice(t,s){t.discountedPrice=this.calcOtherItemDiscountedPrice(t);let e=0;for(let i=0;i<this.otherItems.length;i++)this.otherItems[i].discountedPrice&&(e+=this.otherItems[i].discountedPrice);console.log("form.totalPriceOtherItems : "+e),this.form.totalPriceOtherItems=e,this.updateTotalPrice()},onChangeMasterItemDiscount(t,s){this.form.totalPriceDrawingItems=this.form.totalPriceOriDrawingItems-this.form.totalPriceOriDrawingItems*this.masterItemDiscount/100,this.updateTotalPrice()},onClickConfirm(){var t=this;return c()((function*(){const s=t.tradingItems.map(t=>({uuid:t.uuid,quantity:parseFloat(t.quantity),discount:parseFloat(t.discount/100)}));console.log("TRADING ITEMS: "+JSON.stringify(s)),console.log("OTHER ITEMS: "+JSON.stringify(t.otherItems));try{const e=yield t.$store.dispatch("CalculateAllDetailed",{designId:t.$route.params.designId,tradingItems:s,masterItemDiscount:t.masterItemDiscount,otherItems:t.otherItems});console.log("BEFORE RETRIEVAL FROM BACKEND"),console.log(t.form.totalPrice,t.form.discountedTotalPrice,t.form.totalPriceDrawingItems,t.form.discountedTotalPriceDrawingItems,t.form.totalPriceTradingItems),console.log("AFTER RETRIEVAL FROM BACKEND"),console.log("RESULTS: "+JSON.stringify(e)),console.log("masterItemDiscount: "+t.masterItemDiscount),console.log("Total Price Discounted: "+e.discountedTotalPrice),console.log("Drawing Items Total Price Discounted: "+e.discountedTotalPriceDrawingItems),t.form.totalPrice=e.discountedTotalPrice,t.form.discountedTotalPrice=e.discountedTotalPrice,t.form.totalPriceDrawingItems=e.discountedTotalPriceDrawingItems,t.form.discountedTotalPriceDrawingItems=e.discountedTotalPriceDrawingItems,t.form.transportationCharge=e.transportationCharge,t.form.totalPriceTradingItems=e.totalPriceTradingItems,t.form.totalPriceOtherItems=e.totalPriceOtherItems,t.$notify("success","Successfully calculate trading items")}catch(e){console.log(e.response);const s=e.response.data.error.message;t.$notify("error",s)}}))()}}},u=d,m=(e("7106"),e("2877")),p=Object(m["a"])(u,i,n,!1,null,null,null);s["default"]=p.exports},2257:function(t,s,e){},"36dc":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("q-select",{staticClass:"q-pb-none q-ml-sm",attrs:{options:t.filteredOptions,label:t.label,outlined:"",dense:"","emit-value":"","use-input":"","input-debounce":"0","map-options":"","stack-label":"",clearable:""},on:{filter:t.filterFn,input:t.onInput},scopedSlots:t._u([t.m_val?{key:"append",fn:function(){return[e("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(s){s.stopPropagation(),t.m_val=null}}})]},proxy:!0}:null,{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-italic text-grey"},[t._v("\n        No options available\n      ")])],1)]},proxy:!0}],null,!0),model:{value:t.m_val,callback:function(s){t.m_val=s},expression:"m_val"}})},n=[],o=(e("c975"),e("ddb0"),{props:{options:{type:Array,default:()=>[],required:!0},value:{type:String,default:"",required:!0},label:{type:String,default:"",required:!0}},data(){return{filteredOptions:[],m_val:""}},created(){this.filteredOptions=[...this.options]},methods:{filterFn(t,s){""!==t&&this.options.length?s(()=>{const s=t.toLowerCase();this.options[0].label?this.filteredOptions=this.options.filter(t=>t.label.toLowerCase().indexOf(s)>-1):this.filteredOptions=this.options.filter(t=>t.toLowerCase().indexOf(s)>-1)}):s(()=>{this.filteredOptions=this.options})},onInput(t){this.$emit("input",t)}}}),a=o,l=e("2877"),c=Object(l["a"])(a,i,n,!1,null,null,null);s["a"]=c.exports},7106:function(t,s,e){"use strict";var i=e("2257"),n=e.n(i);n.a}}]);