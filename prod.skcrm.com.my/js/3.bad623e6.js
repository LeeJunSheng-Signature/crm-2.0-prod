(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0726":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-layout",{staticClass:" rounded-borders",staticStyle:{height:"100%"},attrs:{view:"lHh lpr lFf"}},[t.form.drawingNumber?s("q-chip",{attrs:{color:"primary","text-color":"white"}},[t._v("\n      "+t._s(t.form.drawingNumber)+"\n    ")]):t._e(),s("q-chip",{attrs:{color:"primary","text-color":"white"}},[t._v("\n      "+t._s(t.form.referenceName)+"\n    ")]),s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Customised Furniture\n    ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Quantity\n          ")]),s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            UOM\n          ")]),s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Model\n          ")]),s("div",{staticClass:"col-4 text-weight-bold"},[t._v("\n            Description\n          ")]),s("div",{staticClass:"col-1 text-weight-bold"},[t._v("\n            Amount (RM)\n          ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 text-weight-bold"},[t._v("\n            Dealer Price (RM)\n          ")]):t._e()]),s("q-list",t._l(t.quotationItem,(function(e){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.uuid,attrs:{clickable:""},on:{click:function(s){return t.showChildren(e)}}},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(e.quantity)+"\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                Unit\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(e.productNumber)+"\n              ")]),s("div",{staticClass:"col-4"},[t._v("\n                "+t._s(e.brandGoodName)+"\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                "+t._s(Math.ceil(e.recommendedRetailPrice.toFixed(2)))+"\n              ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n                "+t._s(Math.ceil(e.totalDealerPrice.toFixed(2)))+"\n              ")]):t._e(),s("q-separator",{staticClass:"q-my-sm"})],1)])})),1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2 q-mt-md justify-center"},[s("q-btn",{attrs:{color:"primary",label:"Design CAD 4.0 Recalculate"},on:{click:t.onClickKujialeRecalculate}}),s("q-tooltip",[t._v("\n              Recalculate Design CAD 4.0 design estimated total pricing, regenerates missing item list and calculation log\n            ")])],1),s("div",{staticClass:"col-2 q-mt-md justify-center"},[s("q-btn",{attrs:{color:"primary",label:"Design CAD 4.0 Request For Update",disabled:!t.buttonToggles.clickedRecalculate},on:{click:t.onClickRequestUpdateKujiale}}),t.buttonToggles.clickedRecalculate?s("q-tooltip",[t._v("\n              Refetch design data from Design CAD 4.0 and update drawing items and basket items in this detailed quotation\n            ")]):s("q-tooltip",[t._v("\n              Please recalculate Design CAD 4.0 design before request for update\n            ")])],1),s("div",{staticClass:"col-4 q-ml-xl text-weight-bold"}),s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-gutter-sm row justify-center items-center",attrs:{type:"number",label:"Discount (%)"},on:{change:t.onChangeMasterItemDiscount},model:{value:t.masterItemDiscount,callback:function(e){t.masterItemDiscount=t._n(e)},expression:"masterItemDiscount"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-gutter-sm row justify-center items-center",attrs:{label:"Total Price (RM)",disable:""},model:{value:t.form.discountedTotalPriceDrawingItems,callback:function(e){t.$set(t.form,"discountedTotalPriceDrawingItems",e)},expression:"form.discountedTotalPriceDrawingItems"}})],1),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-gutter-sm row justify-center items-center",attrs:{label:"Dealer Total Price (RM)",disable:""},model:{value:t.dealerprice.totalPriceDrawingItems,callback:function(e){t.$set(t.dealerprice,"totalPriceDrawingItems",e)},expression:"dealerprice.totalPriceDrawingItems"}})],1):t._e()])],1)],1),t.baskets.length?s("div",[s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n        Basket\n      ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[t.baskets.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n                Quantity\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                UOM\n              ")]),s("div",{staticClass:"col-3"},[t._v("\n                Model\n              ")]),s("div",{staticClass:"col-4"},[t._v("\n                Description\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Amount(RM)\n              ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 text-weight-bold"},[t._v("\n                Dealer Price (RM)\n              ")]):t._e(),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.baskets,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width q-mb-sm"},[s("div",{staticClass:"col-1"},[t._v("\n                "+t._s(e.quantity)+"\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                Unit\n              ")]),s("div",{staticClass:"col-3"},[t._v("\n                "+t._s(e.productNumber)+"\n              ")]),s("div",{staticClass:"col-4"},[t._v("\n                "+t._s(e.brandGoodName)+"\n              ")]),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n                "+t._s(Math.ceil(e.recommendedRetailPrice.toFixed(2)))+"\n              ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n                "+t._s(Math.ceil(e.totalDealerPrice.toFixed(2)))+"\n              ")]):t._e()])}))],2):t._e()])],1)],1):t._e(),s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Optional Items\n    ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Worktop\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.worktop,label:"Subcategory"},model:{value:t.selectedWorktop,callback:function(e){t.selectedWorktop=e},expression:"selectedWorktop"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWorktopItems,label:"Name"},model:{value:t.form.worktopItem,callback:function(e){t.$set(t.form,"worktopItem",e)},expression:"form.worktopItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.worktopItem)}}})],1)]),t.worktops.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Active/Inactive Status\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Amount(RM)\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n              Dealer Price(RM)\n            ")]):s("div",{staticClass:"col-1"}),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.worktops,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.active)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{dense:"",borderless:"",label:"Discount(%)"},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",s)},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.displayedDealerPrice.toFixed(2))+"\n            ")]):t._e(),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Kitchen Appliances\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.kitchenAppliances,label:"Subcategory"},model:{value:t.selectedKitchenAppliances,callback:function(e){t.selectedKitchenAppliances=e},expression:"selectedKitchenAppliances"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredKitchenAppliances,label:"Name"},model:{value:t.form.kitchenAppliancesItem,callback:function(e){t.$set(t.form,"kitchenAppliancesItem",e)},expression:"form.kitchenAppliancesItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.kitchenAppliancesItem)}}})],1)]),t.kitchens.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Active/Inactive Status\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n              Dealer Price(RM)\n            ")]):s("div",{staticClass:"col-1"}),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.kitchens,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"kitchen.quantity"}}),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.active)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}],"lazy-rules":""},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"kitchen.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.displayedDealerPrice.toFixed(2))+"\n            ")]):s("div"),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Sink & Tap\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.sinkAndTap,label:"Subcategory"},model:{value:t.selectedSinkAndTap,callback:function(e){t.selectedSinkAndTap=e},expression:"selectedSinkAndTap"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredSinkAndTapItems,label:"Name"},model:{value:t.form.sinkAndTapItem,callback:function(e){t.$set(t.form,"sinkAndTapItem",e)},expression:"form.sinkAndTapItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.sinkAndTapItem)}}})],1)]),t.sinks.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Active/Inactive Status\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n              Dealer Price(RM)\n            ")]):s("div",{staticClass:"col-1"}),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.sinks,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"sink.quantity"}}),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.active)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"sink.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.displayedDealerPrice.toFixed(2))+"\n            ")]):s("div"),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Fitting and Accessories\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.fittingAndAccessories,label:"Subcategory"},model:{value:t.selectedFittingAndAccessories,callback:function(e){t.selectedFittingAndAccessories=e},expression:"selectedFittingAndAccessories"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredFittingAndAccessoriesItems,label:"Name"},model:{value:t.form.fittingAndAccessoriesItem,callback:function(e){t.$set(t.form,"fittingAndAccessoriesItem",e)},expression:"form.fittingAndAccessoriesItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.fittingAndAccessoriesItem)}}})],1)]),t.fittingAndAccessories.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Active/Inactive Status\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n              Dealer Price(RM)\n            ")]):s("div",{staticClass:"col-1"}),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.fittingAndAccessories,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.active)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.displayedDealerPrice.toFixed(2))+"\n            ")]):s("div"),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Wall Cladding\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.wallCladding,label:"Subcategory"},model:{value:t.selectedWallCladding,callback:function(e){t.selectedWallCladding=e},expression:"selectedWallCladding"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWallCladdingItems,label:"Name"},model:{value:t.form.wallCladdingItem,callback:function(e){t.$set(t.form,"wallCladdingItem",e)},expression:"form.wallCladdingItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.wallCladdingItem)}}})],1)]),t.wallCladding.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Active/Inactive Status\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n              Dealer Price(RM)\n            ")]):s("div",{staticClass:"col-1"}),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.wallCladding,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.active)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.displayedDealerPrice.toFixed(2))+"\n            ")]):s("div"),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Worktop Slab\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.worktopSlab,label:"Subcategory"},model:{value:t.selectedWorktopSlab,callback:function(e){t.selectedWorktopSlab=e},expression:"selectedWorktopSlab"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWorktopSlabItems,label:"Name"},model:{value:t.form.worktopSlabItem,callback:function(e){t.$set(t.form,"worktopSlabItem",e)},expression:"form.worktopSlabItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.worktopSlabItem)}}})],1)]),t.worktopSlabs.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Active/Inactive Status\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n              Dealer Price(RM)\n            ")]):s("div",{staticClass:"col-1"}),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.worktopSlabs,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.active)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeTradingItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.displayedDealerPrice.toFixed(2))+"\n            ")]):s("div"),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Loose Item\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-1"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.looseItemCategories,label:"Category"},model:{value:t.selectedLooseItemCategory,callback:function(e){t.selectedLooseItemCategory=e},expression:"selectedLooseItemCategory"}})],1),s("div",{staticClass:"col-2"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.filteredLooseItemSubCategories,label:"Subcategory"},model:{value:t.selectedLooseItemSubCategory,callback:function(e){t.selectedLooseItemSubCategory=e},expression:"selectedLooseItemSubCategory"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredLooseItems,label:"Name"},model:{value:t.form.looseItem,callback:function(e){t.$set(t.form,"looseItem",e)},expression:"form.looseItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddLooseItem(t.form.looseItem)}}})],1)]),t.looseItems.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              PUOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              SUOM\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Active/Inactive Status\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n              Dealer Price(RM)\n            ")]):s("div",{staticClass:"col-1"}),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.looseItems,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeLooseItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"looseItem.quantity"}}),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.puom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.suom)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.active)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeLooseItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"looseItem.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(e.displayedDealerPrice.toFixed(2))+"\n            ")]):s("div"),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDeleteLooseItem(e.uuid)}}})],1)}))],2):t._e()])],1),s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Other Items\n    ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Others\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("q-space"),s("div",{staticClass:"col-1"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:t.onClickAddOtherItems}})],1)],1),t.otherItems.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width justify q-gutter-sm text-bold"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Code / Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Unit Price(RM)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discounted Price(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.otherItems,(function(e,i){return s("div",{key:i,staticClass:"row full-width justify items-top q-gutter-sm",staticStyle:{"margin-top":"1.4em","margin-right":"3em"}},[s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"number",outlined:"",placeholder:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeOtherItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"otherItem.quantity"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"text",outlined:"",placeholder:"UOM","stack-label":""},model:{value:e.UOM,callback:function(s){t.$set(e,"UOM",s)},expression:"otherItem.UOM"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{attrs:{type:"text",outlined:"",placeholder:"Code / Model","stack-label":""},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"otherItem.name"}})],1),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{type:"text",outlined:"",placeholder:"Description",autogrow:""},model:{value:e.description,callback:function(s){t.$set(e,"description",s)},expression:"otherItem.description"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"number",outlined:"",placeholder:"Unit Price",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeOtherItemTotalPrice(e,s)}},model:{value:e.unitPrice,callback:function(s){t.$set(e,"unitPrice",t._n(s))},expression:"otherItem.unitPrice"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"number",outlined:"",placeholder:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeOtherItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"otherItem.discount"}})],1),s("div",{staticClass:"col-1 justify-center item-center q-gutter-sm",staticStyle:{margin:"2em"}},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n              ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDeleteOtherItem(i)}}})],1)}))],2):t._e()])],1),s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Detail Quotation Grand Total\n    ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Description\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-1 text-weight-bold"},[t._v("\n            Amount (RM)\n          ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 text-weight-bold"},[t._v("\n            Dealer Amount (RM)\n          ")]):s("div",{staticClass:"col-1"})]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[t._v("\n            Customised Furniture\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.form.discountedTotalPriceDrawingItems).toFixed(2))+"\n          ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.dealerprice.totalPriceDrawingItems).toFixed(2))+"\n          ")]):t._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[t._v("\n            Optional Items\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.form.discountedTotalPriceTradingItems).toFixed(2))+"\n\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.dealerprice.totalPriceTradingItems).toFixed(2))+"\n          ")]):t._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[t._v("\n            Loose Items\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.form.discountedTotalPriceLooseItems).toFixed(2))+"\n\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.dealerprice.totalPriceLooseItems).toFixed(2))+"\n          ")]):t._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[t._v("\n            Other Items\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.form.discountedTotalPriceOtherItems).toFixed(2))+"\n\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n            -\n          ")]):t._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 text-weight-bold"}),s("div",{staticClass:"col-1 text-weight-bold"},[t._v("\n            Grand Total (RM)\n          ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 text-weight-bold"},[t._v("\n            Dealer Grand Total (RM)\n          ")]):s("div",{staticClass:"col-1"})]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 text-weight-bold"}),s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.form.discountedTotalPrice).toFixed(2))+"\n\n            ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n            "+t._s(Number(t.dealerprice.totalPrice).toFixed(2))+"\n          ")]):t._e()])])],1),s("div",{staticClass:"q-mt-md",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"primary",label:"Optional Items Request For Update & Recalculate Detailed Quotation"},on:{click:t.onClickConfirm}})],1)],1),s("q-dialog",{model:{value:t.isDialogShowChildrenOpen,callback:function(e){t.isDialogShowChildrenOpen=e},expression:"isDialogShowChildrenOpen"}},[s("q-card",{staticStyle:{"max-width":"1000px",width:"1000px"}},[s("q-card-section",[s("p",{staticClass:"text-h3 text-center"},[t._v("\n          "+t._s(t.itemToShowChildren.brandGoodName)+"\n        ")])]),s("q-card-section",{staticClass:"full-width"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Quantity\n          ")]),s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            UOM\n          ")]),s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Model\n          ")]),s("div",{staticClass:"col-3 text-weight-bold text-center"},[t._v("\n            Description\n          ")]),s("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            Dimension\n          ")]),s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Material / Colour / Profile\n          ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Design CAD 4.0 Item ID\n          ")]):t._e(),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Price (For checking purpose only)\n          ")]):t._e(),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Dealer Price (RM)\n          ")]):t._e()]),s("q-list",t._l(t.itemToShowChildren.children,(function(e){return s("q-item",{key:e.uuid},[s("div",{staticClass:"row full-width text-center"},[s("div",{staticClass:"col-1 text-center"},[t._v("\n                "+t._s(e.quantity||"-")+"\n              ")]),s("div",{staticClass:"col-1 text-center"},[t._v("\n                Unit\n              ")]),s("div",{staticClass:"col-1 text-center"},[t._v("\n                "+t._s(e.productNumber||"-")+"\n              ")]),s("div",{staticClass:"col-3"},[t._v("\n                "+t._s(e.brandGoodName||"-")+"\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(e.dimensions||"-")+"\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                "+t._s(e.materialName||"-")+"\n              ")]),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n                "+t._s(e.id||"-")+"\n              ")]):t._e(),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n                "+t._s(e.recommendedRetailPrice||"-")+"\n              ")]):t._e(),t.enableDisplayDealerPrice()?s("div",{staticClass:"col-1"},[t._v("\n                "+t._s(e.totalDealerPrice||"-")+"\n              ")]):t._e(),s("q-separator",{staticClass:"q-my-sm"})],1)])})),1)],1)],1)],1)],1)},o=[],a=(s("c975"),s("4e82"),s("ddb0"),s("c973")),n=s.n(a),l=s("ded3"),c=s.n(l),r=s("36dc");function d(t){return!!t.toLowerCase().includes("emkay")}var u=s("2f62"),m={components:{SelectWithFilter:r["a"]},data(){return{itemToShowChildren:{},isDialogShowChildrenOpen:!1,quotation:{},quotationItem:[],brandGoods:[],tradingItems:[],otherItems:[],masterItemDiscount:0,baskets:[],worktops:[],kitchens:[],sinks:[],fittingAndAccessories:[],wallCladding:[],worktopSlabs:[],looseItems:[],form:{drawingNumber:"",totalPriceDrawingItems:0,discountedtotalPriceDrawingItems:0,totalPriceTradingItems:0,discountedTotalPriceTradingItems:0,totalPrice:0,discountedTotalPrice:0,totalPriceLooseItems:0,discountedTotalPriceLooseItems:0,totalPriceOtherItems:0,discountedTotalPriceOtherItems:0,totalInstallationCharges:null,transportationCharge:null,fittingAndAccessories:[],kitchenAppliances:"",kitchenAppliancesItem:"",sinkAndTap:"",sinkAndTapItem:"",selectedWorktop:"",worktopItem:"",fittingAndAccessoriesItem:"",wallCladdingItem:"",worktopSlabItem:""},options:{fittingAndAccessories:[],fittingAndAccessoriesItems:[],wallCladding:[],wallCladdingItems:[],kitchenAppliances:[],kitchenAppliancesItems:[],sinkAndTap:[],sinkAndTapItems:[],worktop:[],worktopItems:[],worktopSlab:[],worktopSlabItems:[],looseItemCategories:[],looseItemSubCategories:[],looseItemItems:[],filteredWorktopItems:[],filteredKitchenAppliances:[],filteredSinkAndTap:[],filteredFittingAndAccessories:[],filteredWallCladding:[],filteredLooseItems:[],filteredLooseItemSubCategories:[]},selectedWorktop:"",selectedSinkAndTap:"",selectedKitchenAppliances:"",selectedFittingAndAccessories:"",selectedWallCladding:"",selectedWorktopSlab:"",selectedLooseItemCategory:"",selectedLooseItemSubCategory:"",dealerprice:{totalPriceDrawingItems:0,totalPriceTradingItems:0,totalPriceLooseItems:0,totalPrice:0},buttonToggles:{clickedRecalculate:!1}}},computed:c()(c()({},Object(u["b"])(["roles","username"])),{},{validDiscount(t){return t>=0&&t<=100},customisedFurnitureTotalPrice(){return 0}}),watch:{tradingItems(t,e){this.worktops=t.filter(t=>"Worktop"===t.category),this.kitchens=t.filter(t=>"Kitchen Appliances"===t.category),this.sinks=t.filter(t=>"Sink and Tap"===t.category),this.fittingAndAccessories=t.filter(t=>"Fitting and Accessories"===t.category),this.wallCladding=t.filter(t=>"Wall Cladding"===t.category),this.worktopSlabs=t.filter(t=>"Worktop Slab"===t.category)},selectedWorktop(t,e){this.options.filteredWorktopItems=this.options.worktopItems.filter(e=>e.subcategory===t)},selectedKitchenAppliances(t,e){this.options.filteredKitchenAppliances=this.options.kitchenAppliancesItems.filter(e=>e.subcategory===t)},selectedSinkAndTap(t,e){this.options.filteredSinkAndTapItems=this.options.sinkAndTapItems.filter(e=>e.subcategory===t)},selectedFittingAndAccessories(t,e){this.options.filteredFittingAndAccessoriesItems=this.options.fittingAndAccessoriesItems.filter(e=>e.subcategory===t)},selectedWallCladding(t,e){this.options.filteredWallCladdingItems=this.options.wallCladdingItems.filter(e=>e.subcategory===t)},selectedWorktopSlab(t,e){this.options.filteredWorktopSlabItems=this.options.worktopSlabItems.filter(e=>e.subcategory===t)},selectedLooseItemCategory(t,e){this.options.filteredLooseItemSubCategories=this.options.looseItemSubCategories.filter(e=>e.category===t)},selectedLooseItemSubCategory(t,e){this.options.filteredLooseItems=this.options.looseItemItems.filter(e=>e.subcategory===t)},quotationItem(t,e){this.setCustomisedFurnitureTotalDealerPrice()},"dealerprice.totalPriceDrawingItems"(t,e){this.updateDealerTotalPrice()},"dealerprice.totalPriceTradingItems"(t,e){this.updateDealerTotalPrice()},"dealerprice.totalPriceLooseItems"(t,e){this.updateDealerTotalPrice()}},beforeMount(){var t=this;return n()((function*(){yield t.getTradingItemAndLooseItemOptions(),yield t.refetchDetailedQuotationInformation()}))()},mounted(){this.setCustomisedFurnitureTotalDealerPrice()},methods:{resetDetailedQuotationData(){this.quotation=[],this.form.referenceName="",this.form.drawingNumber="",this.form.totalPriceDrawingItems=0,this.form.discountedTotalPriceDrawingItems=0,this.form.totalPriceTradingItems=0,this.form.discountedTotalPriceTradingItems=0,this.form.totalPrice=0,this.form.discountedTotalPrice=0,this.form.totalInstallationCharges=0,this.form.transportationCharge=0,this.masterItemDiscount=0,this.form.totalPriceLooseItems=0,this.form.discountedTotalPriceLooseItems=0,this.form.totalPriceOtherItems=0,this.form.discountedTotalPriceOtherItems=0,this.baskets=[],this.quotationItem=[],this.worktops=[],this.kitchens=[],this.sinks=[],this.dealerprice.totalPriceDrawingItems=0,this.dealerprice.totalPriceTradingItems=0,this.tradingItems=[],this.dealerprice.totalPriceLooseItems=0,this.looseItems=[],this.otherItems=[]},getTradingItemAndLooseItemOptions(){var t=this;return n()((function*(){const e=yield t.$store.dispatch("GetTradingItems"),s=yield t.$store.dispatch("GetLooseItems");t.options.wallCladding=t.getSubCategoryOptionsForCategory("Wall Cladding",e),t.options.wallCladdingItems=t.getTradingItemOptionsForCategory("Wall Cladding",e),t.options.fittingAndAccessories=t.getSubCategoryOptionsForCategory("Fitting and Accessories",e),t.options.fittingAndAccessoriesItems=t.getTradingItemOptionsForCategory("Fitting and Accessories",e),t.options.worktopSlab=t.getSubCategoryOptionsForCategory("Worktop Slab",e),t.options.worktopSlabItems=t.getTradingItemOptionsForCategory("Worktop Slab",e),t.options.worktop=t.getSubCategoryOptionsForCategory("Worktop",e),t.options.worktopItems=t.getTradingItemOptionsForCategory("Worktop",e),t.options.kitchenAppliances=t.getSubCategoryOptionsForCategory("Kitchen Appliances",e),t.options.kitchenAppliancesItems=t.getTradingItemOptionsForCategory("Kitchen Appliances",e),t.options.sinkAndTap=t.getSubCategoryOptionsForCategory("Sink and Tap",e),t.options.sinkAndTapItems=t.getTradingItemOptionsForCategory("Sink and Tap",e),t.options.looseItemCategories=t.getCategoryOptionsForLooseItem(s),t.options.looseItemSubCategories=t.getSubCategoryOptionsForLooseItem(s),t.options.looseItemItems=t.getLooseItemOptions(s),t.options.filteredLooseItemSubCategories=t.options.looseItemSubCategories}))()},refetchDetailedQuotationInformation(){var t=this;return n()((function*(){var e,s,i,o,a;if(t.resetDetailedQuotationData(),t.quotation=yield t.$store.dispatch("GetDesigns",t.$route.params.designId),t.form.referenceName=t.quotation.referenceName,t.form.drawingNumber=t.quotation.drawingNumber,t.form.totalPriceDrawingItems=t.quotation.totalPriceDrawingItems,t.quotation.discountedTotalPriceDrawingItems?t.form.discountedTotalPriceDrawingItems=t.quotation.discountedTotalPriceDrawingItems:t.form.discountedTotalPriceDrawingItems=t.quotation.totalPriceDrawingItems,t.form.totalPriceTradingItems=t.quotation.totalPriceTradingItems,t.quotation.discountedTotalPriceTradingItems?t.form.discountedTotalPriceTradingItems=t.quotation.discountedTotalPriceTradingItems:t.form.discountedTotalPriceTradingItems=t.quotation.totalPriceTradingItems,t.form.totalPrice=t.quotation.totalPrice,t.quotation.discountedTotalPrice?t.form.discountedTotalPrice=t.quotation.discountedTotalPrice:t.form.discountedTotalPrice=t.quotation.totalPrice,t.form.totalInstallationCharges=null!==(e=t.quotation.totalInstallationCharges)&&void 0!==e?e:0,t.form.transportationCharge=null!==(s=t.quotation.transportationCharge)&&void 0!==s?s:0,t.masterItemDiscount=t.quotation.masterItemDiscount,t.form.totalPriceLooseItems=null!==(i=t.quotation.totalPriceLooseItems)&&void 0!==i?i:0,t.form.discountedTotalPriceLooseItems=t.quotation.discountedTotalPriceLooseItems,"undefined"===typeof t.quotation.discountedTotalPrice&&console.log("Falling back to total price instead: ",t.form.discountedTotalPrice,t.form.totalPrice),t.form.totalPriceOtherItems=null!==(o=t.quotation.totalPriceOtherItems)&&void 0!==o?o:0,t.form.discountedTotalPriceOtherItems=null!==(a=t.quotation.discountedTotalPriceOtherItems)&&void 0!==a?a:0,t.quotation.quotationDetails&&(t.baskets=t.quotation.quotationDetails.filter(t=>"Basket"===t.subcategory),t.quotationItem=t.quotation.quotationDetails.filter(t=>"Basket"!==t.subcategory)),t.quotationItem){for(const e of t.quotationItem)e.dimensions=t.itemSizeToString(e.size);t.buildItemTree()}if(t.quotation.tradingItems)for(const n of t.quotation.tradingItems){const e=n.stdcost*n.markuprate*n.designAdditionalItems[0].quantity,s=e*n.dealerprice,i=c()(c()({},n),{},{quantity:n.designAdditionalItems[0].quantity,discount:100*n.designAdditionalItems[0].discount,displayedDealerPrice:s,discountedPrice:e*(1-n.designAdditionalItems[0].discount)});"Worktop"===n.category?t.worktops.push(i):"Kitchen Appliances"===n.category?t.kitchens.push(i):"Sink and Tap"===n.category&&t.sinks.push(i),t.dealerprice.totalPriceTradingItems+=s,t.tradingItems.push(i)}if(t.quotation.looseItems)for(const n of t.quotation.looseItems){const e=n.stdcost*n.markuprate*n.designAdditionalLooseItems[0].quantity,s=e*n.dealerprice,i=c()(c()({},n),{},{quantity:n.designAdditionalLooseItems[0].quantity,discount:100*n.designAdditionalLooseItems[0].discount,displayedDealerPrice:s,discountedPrice:e*(1-n.designAdditionalLooseItems[0].discount)});t.dealerprice.totalPriceLooseItems+=s,t.looseItems.push(i)}if(t.quotation.designOtherItems)for(const n of t.quotation.designOtherItems)t.otherItems.push(n);else"undefined"===typeof t.quotation.designOtherItems&&(t.quotation.designOtherItems=[]);console.log("form: "+JSON.stringify(t.form)),console.log("quotation",JSON.stringify(t.quotation)),console.log("this.quotation.designOtherItems: "+JSON.stringify(t.quotation.designOtherItems)),console.log("this.otherItems: "+t.otherItems),t.updateTotalPrice(),t.updateDealerTotalPrice()}))()},enableDisplayDealerPrice(){return!this.roles.includes("salesconsultant")&&!d(this.username)},getTradingItemOptionsForCategory(t,e){return e.filter(e=>e.category===t).map(t=>{const e=[];return e.label=t.name+" | "+t.itemcode,e.value=t.uuid,e.subcategory=t.subcategory,e})},getSubCategoryOptionsForCategory(t,e){if("Sink and Tap"===t){const t=e.map(t=>t.category),s=[...new Set(t)];console.log(JSON.stringify(s))}const s=e.filter(e=>e.category===t).map(t=>t.subcategory),i=[...new Set(s)];return i.map(t=>{const e=[];return e.label=t,e.value=t,e})},getCategoryOptionsForLooseItem(t){const e=t.map(t=>t.category),s=[...new Set(e)];return s.map(t=>{const e=[];return e.label=t,e.value=t,e})},getSubCategoryOptionsForLooseItem(t){const e={};t.forEach(t=>{Object.keys(e).includes(t.subcategory)||(e[t.subcategory]=t.category)});const s=[...new Set(Object.keys(e))];return s.map(t=>{const s=[];return s.label=t,s.value=t,s.category=e[t],s})},getLooseItemOptions(t){return t.map(t=>{const e=[];return e.label=t.name+" | "+t.itemcode,e.value=t.uuid,e.subcategory=t.subcategory,e})},buildItemTree(){if(!this.quotationItem)return;let t=this.quotationItem.filter(t=>!!t.parentId);t=t.sort((t,e)=>0-(Number(t.id.split("-")[1])<Number(e.id.split("-")[1])?1:-1));for(const e of t){const t=this.quotationItem.findIndex(t=>t.id===e.parentId);-1!==t&&(this.quotationItem[t].children||(this.quotationItem[t].children=[]),this.quotationItem[t].children.push(e))}this.quotationItem=this.quotationItem.filter(t=>!t.parentId),this.quotationItem=this.quotationItem.sort((t,e)=>0-(Number(t.id)<Number(e.id)?1:-1));for(const e of this.quotationItem)this.dealerprice.totalPriceDrawingItems+=e.totalDealerPrice},showChildren(t){this.itemToShowChildren=t,this.isDialogShowChildrenOpen=!0},itemSizeToString(t){const{x:e,y:s,z:i}=t;return`${e} x ${i} x ${s}`},remove_duplicates(t){for(var e={},s=[],i=0;i<t.length;i++)t[i].label in e||(s.push(t[i]),e[t[i].label]=!0);return s},updateTotalPrice(){this.form.discountedTotalPrice=this.form.discountedTotalPriceDrawingItems+this.form.discountedTotalPriceTradingItems+this.form.discountedTotalPriceLooseItems+this.form.discountedTotalPriceOtherItems,this.form.discountedTotalPrice<0&&(this.form.discountedTotalPrice=0),console.log(this.form.discountedTotalPrice,this.form.totalPriceTradingItems,this.form.totalPriceOtherItems,this.form.discountedTotalPriceDrawingItems,this.form.discountedTotalPriceLooseItems)},updateDealerTotalPrice(){this.dealerprice.totalPrice=this.dealerprice.totalPriceDrawingItems+this.dealerprice.totalPriceTradingItems+this.dealerprice.totalPriceLooseItems,this.dealerprice.totalPrice<0&&(this.dealerprice.totalPrice=0)},onClickAddTradingItem(t){var e=this;return n()((function*(){if(!t)return;const s=yield e.$store.dispatch("GetTradingItems"),[i]=s.filter(e=>e.uuid===t),o=i.stdcost*i.markuprate,a=i.dealerprice?o*i.dealerprice:o;e.$notify("success","Successfully add "+i.name),e.tradingItems.push(c()(c()({},i),{},{quantity:1,discount:0,discountedPrice:o,unitDealerPrice:a,displayedDealerPrice:a})),e.form.totalPriceTradingItems+=o,e.form.discountedTotalPriceTradingItems+=o,e.dealerprice.totalPriceTradingItems+=a,e.updateTotalPrice(),e.updateDealerTotalPrice()}))()},onClickAddLooseItem(t){var e=this;return n()((function*(){if(!t)return;const s=yield e.$store.dispatch("GetLooseItems"),[i]=s.filter(e=>e.uuid===t),o=i.stdcost*i.markuprate,a=o*i.dealerprice;e.$notify("success","Successfully add "+i.name),e.looseItems.push(c()(c()({},i),{},{quantity:1,discount:0,discountedPrice:o,unitDealerPrice:a,displayedDealerPrice:a})),e.form.totalPriceTradingItems+=o,e.form.discountedTotalPriceLooseItems+=o,e.dealerprice.totalPriceLooseItems+=a,e.updateTotalPrice(),e.updateDealerTotalPrice()}))()},onClickAddOtherItems(){this.otherItems.push({uuid:"",quantity:1,UOM:"Unit",name:"",description:"",unitPrice:0,discount:0,discountedPrice:0})},onDelete(t){const e=this.tradingItems.map(t=>t.uuid).indexOf(t);this.form.totalPriceTradingItems-=this.tradingItems[e].totalPrice,this.form.discountedTotalPriceTradingItems-=this.tradingItems[e].discountedPrice,this.dealerprice.totalPriceTradingItems-=this.tradingItems[e].displayedDealerPrice,this.tradingItems=this.tradingItems.filter(e=>e.uuid!==t),this.updateTotalPrice(),this.updateDealerTotalPrice(),this.$notify("success","Successfully deleted optional item")},onDeleteLooseItem(t){const e=this.looseItems.map(t=>t.uuid).indexOf(t);this.form.totalPriceLooseItems-=this.looseItems[e].totalPrice,this.form.discountedTotalPriceLooseItems-=this.looseItems[e].discountedPrice,this.dealerprice.totalPriceLooseItems-=this.looseItems[e].displayedDealerPrice,this.looseItems=this.looseItems.filter(e=>e.uuid!==t),this.updateTotalPrice(),this.updateDealerTotalPrice(),this.$notify("success","Successfully deleted loose item")},onDeleteOtherItem(t){this.form.totalPriceOtherItems-=this.otherItems[t].totalPrice,this.form.discountedTotalPriceOtherItems-=this.otherItems[t].discountedPrice,this.otherItems=this.otherItems.filter(e=>e!==this.otherItems[t]),this.updateTotalPrice(),this.updateDealerTotalPrice(),this.$notify("success","Successfully deleted an item in Other section")},calcItemDiscountedPrice(t){var e;const s=t.stdcost*t.markuprate*t.quantity*t.nonstdrate,i=s*(null!==(e=null===t||void 0===t?void 0:t.dealerprice)&&void 0!==e?e:1),o=s*((100-t.discount)/100);return t.totalPrice=s,t.discountedPrice=o,t.displayedDealerPrice=i,o},calcItemDealerPrice(t){const e=t.stdcost*t.markuprate*t.quantity*t.dealerprice;return e},onChangeTradingItemTotalPrice(t,e){this.calcItemDiscountedPrice(t);let s=0,i=0,o=0;const a=[this.worktops,this.kitchens,this.sinks,this.fittingAndAccessories,this.wallCladding,this.worktopSlabs];for(const n of a)for(let t=0;t<n.length;t++)n[t].discountedPrice&&(i+=n[t].discountedPrice,s+=n[t].totalPrice,o+=n[t].displayedDealerPrice);this.form.discountedTotalPriceTradingItems=i,this.form.totalPriceTradingItems=s,this.dealerprice.totalPriceTradingItems=o,this.updateTotalPrice(),this.updateDealerTotalPrice()},onChangeLooseItemTotalPrice(t,e){this.calcItemDiscountedPrice(t);let s=0,i=0,o=0;for(let a=0;a<this.looseItems.length;a++)this.looseItems[a].discountedPrice&&(i+=this.looseItems[a].discountedPrice,s+=this.looseItems[a].totalPrice,o+=this.looseItems[a].displayedDealerPrice);this.form.discountedTotalPriceLooseItems=i,this.form.totalPriceLooseItems=s,this.dealerprice.totalPriceLooseItems=o,this.updateTotalPrice(),this.updateDealerTotalPrice()},calcOtherItemDiscountedPrice(t){const e=t.quantity*t.unitPrice*((100-t.discount)/100);return t.discountedPrice=e,e},onChangeOtherItemTotalPrice(t,e){t.discountedPrice=this.calcOtherItemDiscountedPrice(t);let s=0;for(let i=0;i<this.otherItems.length;i++)this.otherItems[i].discountedPrice&&(s+=this.otherItems[i].discountedPrice);this.form.discountedTotalPriceOtherItems=s,this.updateTotalPrice()},onChangeMasterItemDiscount(t,e){this.form.discountedTotalPriceDrawingItems=this.form.totalPriceDrawingItems-this.form.totalPriceDrawingItems*this.masterItemDiscount/100,this.updateTotalPrice(),this.updateDealerTotalPrice()},onClickConfirm(){var t=this;return n()((function*(){const e=t.tradingItems.map(t=>({uuid:t.uuid,quantity:parseFloat(t.quantity),discount:parseFloat(t.discount/100)})),s=t.looseItems.map(t=>({uuid:t.uuid,quantity:parseFloat(t.quantity),discount:parseFloat(t.discount/100)}));console.log("TRADING ITEMS: "+JSON.stringify(e)),console.log("OTHER ITEMS: "+JSON.stringify(t.otherItems));try{const i=yield t.$store.dispatch("CalculateAllDetailed",{designId:t.$route.params.designId,looseItems:s,tradingItems:e,masterItemDiscount:t.masterItemDiscount,otherItems:t.otherItems});console.log("BEFORE RETRIEVAL FROM BACKEND"),console.log(t.form.totalPrice,t.form.discountedTotalPrice,t.form.discountedTotalPriceDrawingItems,t.form.discountedTotalPriceDrawingItems,t.form.totalPriceTradingItems),console.log("AFTER RETRIEVAL FROM BACKEND"),console.log("RESULTS: "+JSON.stringify(i)),console.log("masterItemDiscount: "+t.masterItemDiscount),console.log("Total Price Discounted: "+i.discountedTotalPrice),console.log("Drawing Items Total Price Discounted: "+i.discountedTotalPriceDrawingItems),t.form.totalPrice=i.discountedTotalPrice,t.form.discountedTotalPrice=i.discountedTotalPrice,t.form.totalPriceTradingItems=i.totalPriceTradingItems,t.form.discountedTotalPriceTradingItems=i.discountedTotalPriceTradingItems,t.form.totalPriceDrawingItems=i.totalPriceDrawingItems,t.form.discountedTotalPriceDrawingItems=i.discountedTotalPriceDrawingItems,t.form.totalPriceLooseItems=i.totalPriceLooseItems,t.form.discountedTotalPriceLooseItems=i.discountedTotalPriceLooseItems,t.form.totalPriceOtherItems=i.totalPriceOtherItems,t.form.discountedTotalPriceOtherItems=i.discountedTotalPriceOtherItems,t.form.transportationCharge=i.transportationCharge,t.$notify("success","Successfully calculate trading items")}catch(i){console.log(i.response);const e=i.response.data.error.message;t.$notify("error",e)}}))()},onClickKujialeRecalculate(){var t=this;return n()((function*(){try{t.$q.loading.show();const{totalDrawingPrice:e,message:s}=yield t.$store.dispatch("CalculateDrawing",{drawingId:t.quotation.drawingNumber,uuid:t.$route.params.leadId});if(t.buttonToggles.clickedRecalculate=!0,s.length)throw new Error(s);t.$notify("success",`Successfully recalculated drawing with latest Design CAD 4.0 design data with no missing items found, estimated total price: ${e}.`)}catch(e){const s=e.response?e.response.data.error.message:e.message;t.$notify("error",s)}finally{t.$q.loading.hide()}}))()},onClickRequestUpdateKujiale(){var t=this;return n()((function*(){try{t.$q.loading.show();const e=yield t.$store.dispatch("UpdateDetailedQuotation",{drawingUuid:t.$route.params.designId,drawingId:t.quotation.drawingNumber,leadId:t.$route.params.leadId});console.log("updatedDetailedQuotation: "+JSON.stringify(e)),t.refetchDetailedQuotationInformation(),t.$notify("success","Successfully updated current design with latest Design CAD 4.0 design data.")}catch(e){const s=e.response?e.response.data.error.message:e.message;t.$notify("error",s)}finally{t.buttonToggles.clickedRecalculate=!1,t.$q.loading.hide()}}))()},getCustomisedFurnitureItemDealerPrice(t){let e=0;return t.children.map(t=>{e+=t.totalDealerPrice}),e},setCustomisedFurnitureTotalDealerPrice(){let t=0;this.quotationItem.map(e=>{t+=this.getCustomisedFurnitureItemDealerPrice(e)}),this.dealerprice.totalPriceDrawingItems=t}}},p=m,v=(s("7106"),s("2877")),g=Object(v["a"])(p,i,o,!1,null,null,null);e["default"]=g.exports},2257:function(t,e,s){},"36dc":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{staticClass:"q-pb-none q-ml-sm",attrs:{options:t.filteredOptions,label:t.label,outlined:"",dense:"","emit-value":"","use-input":"","input-debounce":"0","map-options":"","stack-label":"",clearable:""},on:{filter:t.filterFn,input:t.onInput},scopedSlots:t._u([t.m_val?{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(e){e.stopPropagation(),t.m_val=null}}})]},proxy:!0}:null,{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-italic text-grey"},[t._v("\n        No options available\n      ")])],1)]},proxy:!0}],null,!0),model:{value:t.m_val,callback:function(e){t.m_val=e},expression:"m_val"}})},o=[],a=(s("c975"),s("ddb0"),{props:{options:{type:Array,default:()=>[],required:!0},value:{type:String,default:"",required:!0},label:{type:String,default:"",required:!0}},data(){return{filteredOptions:[],m_val:""}},created(){this.filteredOptions=[...this.options]},methods:{filterFn(t,e){""!==t&&this.options.length?e(()=>{const e=t.toLowerCase();this.options[0].label?this.filteredOptions=this.options.filter(t=>t.label.toLowerCase().indexOf(e)>-1):this.filteredOptions=this.options.filter(t=>t.toLowerCase().indexOf(e)>-1)}):e(()=>{this.filteredOptions=this.options})},onInput(t){this.$emit("input",t)}}}),n=a,l=s("2877"),c=Object(l["a"])(n,i,o,!1,null,null,null);e["a"]=c.exports},7106:function(t,e,s){"use strict";var i=s("2257"),o=s.n(i);o.a}}]);