(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0726":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-layout",{staticClass:" rounded-borders",staticStyle:{height:"100%"},attrs:{view:"lHh lpr lFf"}},[t.form.drawingNumber?s("q-chip",{attrs:{color:"primary","text-color":"white"}},[t._v("\n      "+t._s(t.form.drawingNumber)+"\n    ")]):t._e(),s("q-chip",{attrs:{color:"primary","text-color":"white"}},[t._v("\n      "+t._s(t.form.referenceName)+"\n    ")]),s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Customised Furniture\n    ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Quantity\n          ")]),s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            UOM\n          ")]),s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Model\n          ")]),s("div",{staticClass:"col-4 text-weight-bold"},[t._v("\n            Description\n          ")]),s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Amount (RM)\n          ")])]),s("q-list",t._l(t.quotationItem,(function(e){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.uuid,attrs:{clickable:""},on:{click:function(s){return t.showChildren(e)}}},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(e.quantity)+"\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                Unit\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(e.productNumber)+"\n              ")]),s("div",{staticClass:"col-4"},[t._v("\n                "+t._s(e.brandGoodName)+"\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(Math.ceil(e.recommendedRetailPrice.toFixed(2)))+"\n              ")]),s("q-separator",{staticClass:"q-my-sm"})],1)])})),1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-7 q-ml-xl text-weight-bold"}),s("div",{staticClass:"col-2"},[s("q-input",{staticClass:"q-pb-none q-gutter-sm row justify-center items-center",attrs:{type:"number",label:"Discount (%)"},on:{change:t.onChangeMasterItemDiscount},model:{value:t.masterItemDiscount,callback:function(e){t.masterItemDiscount=t._n(e)},expression:"masterItemDiscount"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-gutter-sm row justify-center items-center",attrs:{label:"Total Price (RM)",disable:""},model:{value:t.form.totalPriceDrawingItems,callback:function(e){t.$set(t.form,"totalPriceDrawingItems",e)},expression:"form.totalPriceDrawingItems"}})],1)])],1)],1),s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Optional Items\n    ")]),t.baskets.length?s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Basket\n        ")]),t.baskets.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-4"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Amount(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.baskets,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width q-mb-sm"},[s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.quantity)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Unit\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.productNumber)+"\n            ")]),s("div",{staticClass:"col-4"},[t._v("\n              "+t._s(e.brandGoodName)+"\n            ")]),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(Math.ceil(e.recommendedRetailPrice.toFixed(2)))+"\n            ")])])}))],2):t._e()])],1):t._e(),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Worktop\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.worktop,label:"Category"},model:{value:t.selectedWorktop,callback:function(e){t.selectedWorktop=e},expression:"selectedWorktop"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWorktopItems,label:"Name"},model:{value:t.form.worktopItem,callback:function(e){t.$set(t.form,"worktopItem",e)},expression:"form.worktopItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.worktopItem)}}})],1)]),t.worktops.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Amount(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.worktops,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{dense:"",borderless:"",label:"Discount(%)"},on:{change:function(s){return t.onChangeOptionalItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",s)},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(e))+"\n            ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Kitchen Appliances\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.kitchenAppliances,label:"Subcategory"},model:{value:t.selectedKitchenAppliances,callback:function(e){t.selectedKitchenAppliances=e},expression:"selectedKitchenAppliances"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredKitchenAppliances,label:"Name"},model:{value:t.form.kitchenAppliancesItem,callback:function(e){t.$set(t.form,"kitchenAppliancesItem",e)},expression:"form.kitchenAppliancesItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.kitchenAppliancesItem)}}})],1)]),t.kitchens.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.kitchens,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"kitchen.quantity"}}),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}],"lazy-rules":""},on:{change:function(s){return t.onChangeOptionalItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"kitchen.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(e))+"\n            ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Sink & Tap\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.sinkAndTap,label:"Category"},model:{value:t.selectedSinkAndTap,callback:function(e){t.selectedSinkAndTap=e},expression:"selectedSinkAndTap"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredSinkAndTapItems,label:"Name"},model:{value:t.form.sinkAndTapItem,callback:function(e){t.$set(t.form,"sinkAndTapItem",e)},expression:"form.sinkAndTapItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.sinkAndTapItem)}}})],1)]),t.sinks.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.sinks,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"sink.quantity"}}),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeOptionalItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"sink.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(e))+"\n            ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Fitting and Accessories\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.fittingAndAccessories,label:"Category"},model:{value:t.selectedFittingAndAccessories,callback:function(e){t.selectedFittingAndAccessories=e},expression:"selectedFittingAndAccessories"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredFittingAndAccessoriesItems,label:"Name"},model:{value:t.form.fittingAndAccessoriesItem,callback:function(e){t.$set(t.form,"fittingAndAccessoriesItem",e)},expression:"form.fittingAndAccessoriesItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.fittingAndAccessoriesItem)}}})],1)]),t.fittingAndAccessories.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.fittingAndAccessories,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeOptionalItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(e))+"\n            ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Wall Cladding\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.wallCladding,label:"Category"},model:{value:t.selectedWallCladding,callback:function(e){t.selectedWallCladding=e},expression:"selectedWallCladding"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWallCladdingItems,label:"Name"},model:{value:t.form.wallCladdingItem,callback:function(e){t.$set(t.form,"wallCladdingItem",e)},expression:"form.wallCladdingItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.wallCladdingItem)}}})],1)]),t.wallCladding.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.wallCladding,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeOptionalItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(e))+"\n            ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Worktop Slab\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("select-with-filter",{staticClass:"q-pb-none",attrs:{options:t.options.worktopSlab,label:"Category"},model:{value:t.selectedWorktopSlab,callback:function(e){t.selectedWorktopSlab=e},expression:"selectedWorktopSlab"}})],1),s("div",{staticClass:"col-6"},[s("select-with-filter",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.filteredWorktopSlabItems,label:"Name"},model:{value:t.form.worktopSlabItem,callback:function(e){t.$set(t.form,"worktopSlabItem",e)},expression:"form.worktopSlabItem"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:function(e){return t.onClickAddTradingItem(t.form.worktopSlabItem)}}})],1)]),t.worktopSlabs.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-2"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Price(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.worktopSlabs,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("q-input",{staticClass:"col-2",attrs:{type:"number",dense:"",borderless:"",label:"Quantity",rules:[function(t){return t>=0}]},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"worktop.quantity"}}),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.uom)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.itemcode)+"\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              "+t._s(e.name)+"\n            ")]),s("q-input",{staticClass:"col-1",attrs:{type:"number",dense:"",borderless:"",label:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeOptionalItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"worktop.discount"}}),s("div",{staticClass:"col-1 justify-center item-center"},[t._v("\n              "+t._s(t.calcItemDiscountedPrice(e))+"\n            ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDelete(e.uuid)}}})],1)}))],2):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Others\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("q-space"),s("div",{staticClass:"col-1"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:t.onClickAddOtherItems}})],1)],1),t.otherItems.length?s("div",{staticClass:"row q-mt-md"},[s("div",{staticClass:"row full-width justify q-gutter-sm"},[s("div",{staticClass:"col-1"},[t._v("\n              Quantity\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              UOM\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              Code / Model\n            ")]),s("div",{staticClass:"col-3"},[t._v("\n              Description\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Unit Price(RM)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discount(%)\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              Discounted Price(RM)\n            ")]),s("q-separator",{staticClass:"q-my-sm"})],1),t._l(t.otherItems,(function(e,i){return s("div",{key:i,staticClass:"row full-width justify items-top q-gutter-sm",staticStyle:{"margin-top":"1.4em","margin-right":"3em"}},[s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"number",outlined:"",placeholder:"Quantity",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeOtherItemTotalPrice(e,s)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",t._n(s))},expression:"otherItem.quantity"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"text",outlined:"",placeholder:"UOM","stack-label":""},model:{value:e.UOM,callback:function(s){t.$set(e,"UOM",s)},expression:"otherItem.UOM"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{attrs:{type:"text",outlined:"",placeholder:"Code / Model","stack-label":""},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"otherItem.name"}})],1),s("div",{staticClass:"col-3"},[s("q-input",{attrs:{type:"text",outlined:"",placeholder:"Description",autogrow:""},model:{value:e.description,callback:function(s){t.$set(e,"description",s)},expression:"otherItem.description"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"number",outlined:"",placeholder:"Unit Price",rules:[function(t){return t>=0}]},on:{change:function(s){return t.onChangeOtherItemTotalPrice(e,s)}},model:{value:e.unitPrice,callback:function(s){t.$set(e,"unitPrice",t._n(s))},expression:"otherItem.unitPrice"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{type:"number",outlined:"",placeholder:"Discount(%)",min:"0",max:"100",rules:[function(t){return t>=0&&t<=100}]},on:{change:function(s){return t.onChangeOtherItemTotalPrice(e,s)}},model:{value:e.discount,callback:function(s){t.$set(e,"discount",t._n(s))},expression:"otherItem.discount"}})],1),s("div",{staticClass:"col-1 justify-center item-center q-gutter-sm",staticStyle:{margin:"2em"}},[t._v("\n              "+t._s(e.discountedPrice.toFixed(2))+"\n              ")]),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(e){return t.onDeleteOtherItem(i)}}})],1)}))],2):t._e()])],1),s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Detail Quotation Grand Total\n    ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Description\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Amount (RM)\n          ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[t._v("\n            Customised Furniture\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-2"},[t._v("\n            "+t._s(Number(t.form.totalPriceDrawingItems).toFixed(2))+"\n          ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[t._v("\n            Optional Items\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-2"},[t._v("\n            "+t._s(Number(t.form.totalPriceTradingItems).toFixed(2))+"\n\n            ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-2"},[t._v("\n            Other Items\n          ")]),s("div",{staticClass:"col-8 text-weight-bold"}),s("div",{staticClass:"col-2"},[t._v("\n            "+t._s(t.form.totalPriceOtherItems.toFixed(2))+"\n\n            ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 text-weight-bold"}),s("div",{staticClass:"col-2 text-weight-bold"},[t._v("\n            Grand Total (RM)\n          ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 text-weight-bold"}),s("div",{staticClass:"col-2"},[t._v("\n            "+t._s(t.form.discountedTotalPrice.toFixed(2))+"\n\n            ")])])])],1),s("div",{staticClass:"q-mt-md",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"primary",label:"Calculate"},on:{click:t.onClickConfirm}})],1)],1),s("q-dialog",{model:{value:t.isDialogShowChildrenOpen,callback:function(e){t.isDialogShowChildrenOpen=e},expression:"isDialogShowChildrenOpen"}},[s("q-card",{staticStyle:{"max-width":"1000px",width:"1000px"}},[s("q-card-section",[s("p",{staticClass:"text-h3 text-center"},[t._v("\n          "+t._s(t.itemToShowChildren.brandGoodName)+"\n        ")])]),s("q-card-section",{staticClass:"full-width"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-1 text-weight-bold text-center"},[t._v("\n            Quantity\n          ")]),s("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            UOM\n          ")]),s("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            Model\n          ")]),s("div",{staticClass:"col-3 text-weight-bold text-center"},[t._v("\n            Description\n          ")]),s("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            Dimension\n          ")]),s("div",{staticClass:"col-2 text-weight-bold text-center"},[t._v("\n            Material / Colour / Profile\n          ")])]),s("q-list",t._l(t.itemToShowChildren.children,(function(e){return s("q-item",{key:e.uuid},[s("div",{staticClass:"row full-width text-center"},[s("div",{staticClass:"col-1 text-center"},[t._v("\n                "+t._s(e.quantity||"-")+"\n              ")]),s("div",{staticClass:"col-2 text-center"},[t._v("\n                Unit\n              ")]),s("div",{staticClass:"col-2 text-center"},[t._v("\n                "+t._s(e.productNumber||"-")+"\n              ")]),s("div",{staticClass:"col-3"},[t._v("\n                "+t._s(e.brandGoodName||"-")+"\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(e.dimensions||"-")+"\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                "+t._s(e.materialName||"-")+"\n              ")]),s("q-separator",{staticClass:"q-my-sm"})],1)])})),1)],1)],1)],1)],1)},n=[],o=(s("c975"),s("ddb0"),s("ded3")),a=s.n(o),l=s("c973"),c=s.n(l),r=s("36dc"),d={components:{SelectWithFilter:r["a"]},data(){return{itemToShowChildren:{},isDialogShowChildrenOpen:!1,quotation:{},quotationItem:[],brandGoods:[],tradingItems:[],otherItems:[],masterItemDiscount:0,baskets:[],worktops:[],kitchens:[],sinks:[],fittingAndAccessories:[],wallCladding:[],worktopSlabs:[],form:{drawingNumber:"",totalPriceOriDrawingItems:0,totalPriceDrawingItems:0,discountedTotalPriceDrawingItems:0,totalPriceTradingItems:0,totalPrice:0,discountedTotalPrice:0,totalPriceOtherItems:0,totalInstallationCharges:null,transportationCharge:null,fittingAndAccessories:[],kitchenAppliances:"",kitchenAppliancesItem:"",sinkAndTap:"",sinkAndTapItem:"",selectedWorktop:"",worktopItem:"",fittingAndAccessoriesItem:"",wallCladdingItem:"",worktopSlabItem:""},options:{fittingAndAccessories:[],fittingAndAccessoriesItems:[],wallCladding:[],wallCladdingItems:[],kitchenAppliances:[],kitchenAppliancesItems:[],sinkAndTap:[],sinkAndTapItems:[],worktop:[],worktopItems:[],worktopSlab:[],worktopSlabItems:[],filteredWorktopItems:[],filteredKitchenAppliances:[],filteredSinkAndTap:[],filteredFittingAndAccessories:[],filteredWallCladding:[]},selectedWorktop:"",selectedSinkAndTap:"",selectedKitchenAppliances:"",selectedFittingAndAccessories:"",selectedWallCladding:"",selectedWorktopSlab:""}},computed:{validDiscount(t){return t>=0&&t<=100},customisedFurnitureTotalPrice(){return 0}},watch:{tradingItems(t,e){this.worktops=t.filter(t=>"Worktop"===t.category),this.kitchens=t.filter(t=>"Kitchen Appliances"===t.category),this.sinks=t.filter(t=>"Sink and Tap"===t.category),this.fittingAndAccessories=t.filter(t=>"Fitting and Accessories"===t.category),this.wallCladding=t.filter(t=>"Wall Cladding"===t.category),this.worktopSlabs=t.filter(t=>"Worktop Slab"===t.category)},selectedWorktop(t,e){this.options.filteredWorktopItems=this.options.worktopItems.filter(e=>e.subcategory===t)},selectedKitchenAppliances(t,e){this.options.filteredKitchenAppliances=this.options.kitchenAppliancesItems.filter(e=>e.subcategory===t)},selectedSinkAndTap(t,e){this.options.filteredSinkAndTapItems=this.options.sinkAndTapItems.filter(e=>e.subcategory===t)},selectedFittingAndAccessories(t,e){this.options.filteredFittingAndAccessoriesItems=this.options.fittingAndAccessoriesItems.filter(e=>e.subcategory===t)},selectedWallCladding(t,e){this.options.filteredWallCladdingItems=this.options.wallCladdingItems.filter(e=>e.subcategory===t)},selectedWorktopSlab(t,e){this.options.filteredWorktopSlabItems=this.options.worktopSlabItems.filter(e=>e.subcategory===t)}},created(){var t=this;return c()((function*(){var e,s;if(t.quotation=yield t.$store.dispatch("GetDesigns",t.$route.params.designId),console.log("this.quotation: "+JSON.stringify(t.quotation)),t.form.referenceName=t.quotation.referenceName,t.form.drawingNumber=t.quotation.drawingNumber,t.form.totalPriceDrawingItems=t.quotation.totalPriceDrawingItems,t.form.totalPriceOriDrawingItems=t.quotation.totalPriceDrawingItems,t.form.totalPriceTradingItems=t.quotation.totalPriceTradingItems,t.form.totalInstallationCharges=t.quotation.totalInstallationCharges,t.form.transportationCharge=t.quotation.transportationCharge,t.form.totalPrice=t.quotation.totalPrice,t.form.discountedTotalPrice=null!==(e=t.quotation.discountedTotalPrice)&&void 0!==e?e:t.quotation.totalPrice,console.log("FALLING BACK HERE",t.form.discountedTotalPrice,t.quotation.discountedTotalPrice,t.quotation.totalPrice),"undefined"===typeof t.form.discountedTotalPrice&&console.log("Falling back to total price instead: ",t.form.discountedTotalPrice,t.form.totalPrice),t.form.totalPriceOtherItems=null!==(s=t.quotation.totalPriceOtherItems)&&void 0!==s?s:0,t.quotation.quotationDetails&&(t.baskets=t.quotation.quotationDetails.filter(t=>"Basket"===t.subcategory),t.quotationItem=t.quotation.quotationDetails.filter(t=>"Basket"!==t.subcategory)),t.quotationItem){for(const e of t.quotationItem)e.dimensions=t.itemSizeToString(e.size);t.buildItemTree()}const i=yield t.$store.dispatch("GetTradingItems");if(t.options.wallCladding=t.getSubCategoryOptionsForCategory("Wall Cladding",i),t.options.wallCladdingItems=t.getTradingItemOptionsForCategory("Wall Cladding",i),t.options.fittingAndAccessories=t.getSubCategoryOptionsForCategory("Fitting and Accessories",i),t.options.fittingAndAccessoriesItems=t.getTradingItemOptionsForCategory("Fitting and Accessories",i),t.options.worktopSlab=t.getSubCategoryOptionsForCategory("Worktop Slab",i),t.options.worktopSlabItems=t.getTradingItemOptionsForCategory("Worktop Slab",i),t.options.worktop=t.getSubCategoryOptionsForCategory("Worktop",i),t.options.worktopItems=t.getTradingItemOptionsForCategory("Worktop",i),t.options.kitchenAppliances=t.getSubCategoryOptionsForCategory("Kitchen Appliances",i),t.options.kitchenAppliancesItems=t.getTradingItemOptionsForCategory("Kitchen Appliances",i),t.options.sinkAndTap=t.getSubCategoryOptionsForCategory("Sink and Tap",i),t.options.sinkAndTapItems=t.getTradingItemOptionsForCategory("Sink and Tap",i),t.quotation.tradingItems)for(const n of t.quotation.tradingItems){const e=a()(a()({},n),{},{quantity:n.designAdditionalItems[0].quantity,discount:100*n.designAdditionalItems[0].discount});"Worktop"===n.category?t.worktops.push(e):"Kitchen Appliances"===n.category?t.kitchens.push(e):"Sink and Tap"===n.category&&t.sinks.push(e),t.tradingItems.push(e)}if(t.quotation.designOtherItems)for(const n of t.quotation.designOtherItems)t.otherItems.push(n);else"undefined"===typeof t.quotation.designOtherItems&&(t.quotation.designOtherItems=[]);console.log("form: "+JSON.stringify(t.form)),console.log("quotation",JSON.stringify(t.quotation)),console.log("this.quotation.designOtherItems: "+JSON.stringify(t.quotation.designOtherItems)),console.log("this.otherItems: "+t.otherItems)}))()},methods:{getTradingItemOptionsForCategory(t,e){return e.filter(e=>e.category===t).map(t=>{const e=[];return e.label=t.name+" | "+t.itemcode,e.value=t.uuid,e.subcategory=t.subcategory,e})},getSubCategoryOptionsForCategory(t,e){const s=e.filter(e=>e.category===t).map(t=>t.subcategory),i=[...new Set(s)];return i.map(t=>{const e=[];return e.label=t,e.value=t,e})},buildItemTree(){if(!this.quotationItem)return;const t=this.quotationItem.filter(t=>!!t.parentId);for(const e of t){const t=this.quotationItem.findIndex(t=>t.id===e.parentId);-1!==t&&(this.quotationItem[t].children||(this.quotationItem[t].children=[]),this.quotationItem[t].children.push(e))}this.quotationItem=this.quotationItem.filter(t=>!t.parentId)},showChildren(t){this.itemToShowChildren=t,this.isDialogShowChildrenOpen=!0},itemSizeToString(t){const{x:e,y:s,z:i}=t;return`${e} x ${i} x ${s}`},remove_duplicates(t){for(var e={},s=[],i=0;i<t.length;i++)t[i].label in e||(s.push(t[i]),e[t[i].label]=!0);return s},updateTotalPrice(){this.form.discountedTotalPrice=this.form.totalPriceTradingItems+this.form.totalPriceOtherItems+this.form.totalPriceDrawingItems},onClickAddTradingItem(t){var e=this;return c()((function*(){if(!t)return;const s=yield e.$store.dispatch("GetTradingItems"),[i]=s.filter(e=>e.uuid===t),n=(i.stdcost*i.markuprate).toFixed(2);e.$notify("success","Successfully add "+i.name),e.tradingItems.push(a()(a()({},i),{},{quantity:1,discount:0})),e.form.totalPriceTradingItems+=n,e.updateTotalPrice()}))()},onClickAddOtherItems(){this.otherItems.push({uuid:"",quantity:0,UOM:"Unit",name:"",description:"",unitPrice:0,discount:0,discountedPrice:0})},onDelete(t){const e=this.tradingItems.map(t=>t.uuid).indexOf(t);this.form.totalPriceTradingItems-=Math.ceil(this.tradingItems[e].discountedPrice),this.tradingItems=this.tradingItems.filter(e=>e.uuid!==t),this.updateTotalPrice(),this.$notify("success","Successfully deleted")},onDeleteOtherItem(t){this.form.totalPriceOtherItems-=this.otherItems[t].discountedPrice,this.otherItems=this.otherItems.filter(e=>e!==this.otherItems[t]),this.updateTotalPrice(),this.$notify("success","Successfully deleted an item in Other section")},displayOptionalItemDiscountedPrice(t){return 0},calcItemDiscountedPrice(t){const e=((t.stdcost*t.markuprate).toFixed(2)*t.quantity*((100-t.discount)/100)).toFixed(2);return t.discountedPrice=e,e},onChangeOptionalItemTotalPrice(t,e){let s=0;const i=[this.worktops,this.kitchens,this.sinks,this.fittingAndAccessories,this.wallCladding,this.worktopSlabs];for(const n of i)for(let t=0;t<n.length;t++)n[t].discountedPrice&&(s+=n[t].discountedPrice);this.form.totalPriceTradingItems=s,this.updateTotalPrice(),console.log(this.form.discountedTotalPrice)},calcOtherItemDiscountedPrice(t){let e=(t.quantity*t.unitPrice*((100-t.discount)/100)).toFixed(2);return e=parseFloat(e),t.discountedPrice=e,e},onChangeOtherItemTotalPrice(t,e){t.discountedPrice=this.calcOtherItemDiscountedPrice(t);let s=0;for(let i=0;i<this.otherItems.length;i++)this.otherItems[i].discountedPrice&&(s+=this.otherItems[i].discountedPrice);console.log("form.totalPriceOtherItems : "+s),this.form.totalPriceOtherItems=s,this.updateTotalPrice()},onChangeMasterItemDiscount(t,e){this.form.totalPriceDrawingItems=this.form.totalPriceOriDrawingItems-this.form.totalPriceOriDrawingItems*this.masterItemDiscount/100,this.updateTotalPrice()},onClickConfirm(){var t=this;return c()((function*(){const e=t.tradingItems.map(t=>({uuid:t.uuid,quantity:parseFloat(t.quantity),discount:parseFloat(t.discount/100)}));console.log("TRADING ITEMS: "+JSON.stringify(e)),console.log("OTHER ITEMS: "+JSON.stringify(t.otherItems));try{const s=yield t.$store.dispatch("CalculateAllDetailed",{designId:t.$route.params.designId,tradingItems:e,masterItemDiscount:t.masterItemDiscount,otherItems:t.otherItems});console.log("BEFORE RETRIEVAL FROM BACKEND"),console.log(t.form.totalPrice,t.form.discountedTotalPrice,t.form.totalPriceDrawingItems,t.form.discountedTotalPriceDrawingItems,t.form.totalPriceTradingItems),console.log("AFTER RETRIEVAL FROM BACKEND"),console.log("RESULTS: "+JSON.stringify(s)),console.log("masterItemDiscount: "+t.masterItemDiscount),console.log("Total Price Discounted: "+s.discountedTotalPrice),console.log("Drawing Items Total Price Discounted: "+s.discountedTotalPriceDrawingItems),t.form.totalPrice=s.discountedTotalPrice,t.form.discountedTotalPrice=s.discountedTotalPrice,t.form.totalPriceDrawingItems=s.discountedTotalPriceDrawingItems,t.form.discountedTotalPriceDrawingItems=s.discountedTotalPriceDrawingItems,t.form.transportationCharge=s.transportationCharge,t.form.totalPriceTradingItems=s.totalPriceTradingItems,t.form.totalPriceOtherItems=s.totalPriceOtherItems,t.$notify("success","Successfully calculate trading items")}catch(s){console.log(s.response);const e=s.response.data.error.message;t.$notify("error",e)}}))()}}},u=d,m=(s("7106"),s("2877")),p=Object(m["a"])(u,i,n,!1,null,null,null);e["default"]=p.exports},2257:function(t,e,s){},"36dc":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-select",{staticClass:"q-pb-none q-ml-sm",attrs:{options:t.filteredOptions,label:t.label,outlined:"",dense:"","emit-value":"","use-input":"","input-debounce":"0","map-options":"","stack-label":"",clearable:""},on:{filter:t.filterFn,input:t.onInput},scopedSlots:t._u([t.m_val?{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"cancel"},on:{click:function(e){e.stopPropagation(),t.m_val=null}}})]},proxy:!0}:null,{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-italic text-grey"},[t._v("\n        No options available\n      ")])],1)]},proxy:!0}],null,!0),model:{value:t.m_val,callback:function(e){t.m_val=e},expression:"m_val"}})},n=[],o=(s("c975"),s("ddb0"),{props:{options:{type:Array,default:()=>[],required:!0},value:{type:String,default:"",required:!0},label:{type:String,default:"",required:!0}},data(){return{filteredOptions:[],m_val:""}},created(){this.filteredOptions=[...this.options]},methods:{filterFn(t,e){""!==t&&this.options.length?e(()=>{const e=t.toLowerCase();this.options[0].label?this.filteredOptions=this.options.filter(t=>t.label.toLowerCase().indexOf(e)>-1):this.filteredOptions=this.options.filter(t=>t.toLowerCase().indexOf(e)>-1)}):e(()=>{this.filteredOptions=this.options})},onInput(t){this.$emit("input",t)}}}),a=o,l=s("2877"),c=Object(l["a"])(a,i,n,!1,null,null,null);e["a"]=c.exports},7106:function(t,e,s){"use strict";var i=s("2257"),n=s.n(i);n.a}}]);