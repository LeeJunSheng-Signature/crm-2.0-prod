(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"007d":function(t,e,s){"use strict";var i=s("ed08");const o={data(){return{textRules:t=>!!t.toString()&&t.toString().length,emailRules:t=>!t||Object(i["d"])(t),phoneNoRules:t=>!!t&&Object(i["e"])(t),floatRules:t=>!Number.isNaN(parseFloat(t))}}};e["a"]=o},ec84:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-layout",{staticClass:" rounded-borders",staticStyle:{height:"100%"},attrs:{view:"lHh lpr lFf"}},[s("div",{staticClass:"text-h6 q-mt-md"},[t._v("\n      Service Order Item List (Repair Maintenance)\n    ")]),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Items\n        ")]),s("div",{staticClass:"row q-gutter-sm justify"},[s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none",attrs:{options:t.options.category,label:"Product Category",dense:"",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:t.selected.category,callback:function(e){t.$set(t.selected,"category",e)},expression:"selected.category"}})],1),s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.subCategory[t.selected.category],label:t.subCategoryLabel,outlined:"",dense:"","emit-value":"","map-options":"","stack-label":""},model:{value:t.selected.subCategory,callback:function(e){t.$set(t.selected,"subCategory",e)},expression:"selected.subCategory"}})],1),s("div",{staticClass:"col"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.filteredItemOptions,label:t.itemNameLabel,outlined:"",dense:"","emit-value":"","map-options":"","stack-label":""},model:{value:t.selected.item,callback:function(e){t.$set(t.selected,"item",e)},expression:"selected.item"}})],1)]),s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-mt-sm",attrs:{outlined:"",dense:"",label:"Width"},model:{value:t.inserting.width,callback:function(e){t.$set(t.inserting,"width",e)},expression:"inserting.width"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{outlined:"",dense:"",label:"Height"},model:{value:t.inserting.height,callback:function(e){t.$set(t.inserting,"height",e)},expression:"inserting.height"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{outlined:"",dense:"",label:"Depth"},model:{value:t.inserting.depth,callback:function(e){t.$set(t.inserting,"depth",e)},expression:"inserting.depth"}})],1),s("div",{staticClass:"col-2"},[s("q-select",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{options:t.options.materials,outlined:"",dense:"","emit-value":"","map-options":"","stack-label":"",label:t.materialLabel},model:{value:t.inserting.material,callback:function(e){t.$set(t.inserting,"material",e)},expression:"inserting.material"}})],1),s("div",{staticClass:"col-2"},[s("q-select",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{options:t.options.colours[t.inserting.material]||[],outlined:"",dense:"","emit-value":"","map-options":"","stack-label":"",label:t.colourLabel},model:{value:t.inserting.colour,callback:function(e){t.$set(t.inserting,"colour",e)},expression:"inserting.colour"}})],1),s("div",{staticClass:"col-2"},[s("q-select",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{options:t.inserting.material.length&&t.inserting.colour.length?t.options.profiles[t.inserting.material][t.inserting.colour]:[],outlined:"",dense:"","emit-value":"","map-options":"","stack-label":"",label:t.profileLabel},model:{value:t.inserting.profile,callback:function(e){t.$set(t.inserting,"profile",e)},expression:"inserting.profile"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add Item"},on:{click:function(e){return t.onClickAddServiceOrderItem(t.selected.item)}}})],1)]),s("q-separator",{staticClass:"q-my-sm"}),t.form.serviceOrderItems.length?s("div",{staticClass:"row q-mt-md"},t._l(t.form.serviceOrderItems,(function(e){return s("div",{key:e.serviceReportItemId,staticClass:"row full-width"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-1"},[t._v("\n                Qty\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                Description\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Width\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Height\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Depth\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                Material\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Colour\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Profile\n              ")]),s("q-separator",{staticClass:"q-my-sm"})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{borderless:"",dense:"",label:"Qty"},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",s)},expression:"serviceOrderItem.quantity"}})],1),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.description)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.width)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.height)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.depth)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.material)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.colour)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.profile)+"\n            ")]),s("div",{staticClass:"row full-width q-mt-sm"},[s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none",attrs:{options:t.options.rootCause,label:"Root Cause",dense:"",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.rootCause,callback:function(s){t.$set(e,"rootCause",s)},expression:"serviceOrderItem.rootCause"}})],1),s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.byReason[e.rootCause],label:"By Reason",dense:"",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"serviceOrderItem.reason"}})],1),s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.byParty[e.rootCause],label:"By Party",dense:"",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.party,callback:function(s){t.$set(e,"party",s)},expression:"serviceOrderItem.party"}})],1),s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.subReason[e.rootCause],label:"Sub Reason",dense:"",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.subReason,callback:function(s){t.$set(e,"subReason",s)},expression:"serviceOrderItem.subReason"}})],1)]),s("div",{staticClass:"row full-width justify q-mt-sm"},[s("div",{staticClass:"col-5"},[s("div",{staticClass:"text-weight-bold text-uppercase text-grey-5"},[t._v("\n                  Remarks\n                ")]),s("q-input",{attrs:{dense:"",filled:"",type:"textarea",rules:[t.textRules]},model:{value:e.remarks,callback:function(s){t.$set(e,"remarks",s)},expression:"serviceOrderItem.remarks"}})],1),s("div",{staticClass:"col-5"},[s("div",{staticClass:"text-weight-bold text-uppercase text-grey-5 q-ml-md"},[t._v("\n                  Remarks (for Factory)\n                ")]),s("q-input",{staticClass:"q-ml-md",attrs:{dense:"",filled:"",type:"textarea",rules:[t.textRules]},model:{value:e.remarksFactory,callback:function(s){t.$set(e,"remarksFactory",s)},expression:"serviceOrderItem.remarksFactory"}})],1),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",size:"sm",color:"negative",flat:""},on:{click:function(s){return t.onDeleteServiceOrderItem(e.serviceReportItemId)}}}),s("q-separator",{staticClass:"q-my-sm"})],1)])})),0):t._e()],1)],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Others\n        ")]),s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-mt-sm",attrs:{dense:"",outlined:"",label:"Qty"},model:{value:t.customItem.quantity,callback:function(e){t.$set(t.customItem,"quantity",e)},expression:"customItem.quantity"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{staticClass:"q-pb-none q-mt-sm q-ml-sm",attrs:{dense:"",outlined:"",label:"Description"},model:{value:t.customItem.description,callback:function(e){t.$set(t.customItem,"description",e)},expression:"customItem.description"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{staticClass:"q-pb-none q-mt-sm q-ml-sm",attrs:{dense:"",outlined:"",label:"U/Price",prefix:"RM"},model:{value:t.customItem.price,callback:function(e){t.$set(t.customItem,"price",e)},expression:"customItem.price"}})],1)]),s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-mt-sm",attrs:{dense:"",outlined:"",label:"Width"},model:{value:t.customItem.width,callback:function(e){t.$set(t.customItem,"width",e)},expression:"customItem.width"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{dense:"",outlined:"",label:"Height"},model:{value:t.customItem.height,callback:function(e){t.$set(t.customItem,"height",e)},expression:"customItem.height"}})],1),s("div",{staticClass:"col-1"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{dense:"",outlined:"",label:"Depth"},model:{value:t.customItem.depth,callback:function(e){t.$set(t.customItem,"depth",e)},expression:"customItem.depth"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{dense:"",outlined:"",label:"Material"},model:{value:t.customItem.material,callback:function(e){t.$set(t.customItem,"material",e)},expression:"customItem.material"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{dense:"",outlined:"",label:"Colour"},model:{value:t.customItem.colour,callback:function(e){t.$set(t.customItem,"colour",e)},expression:"customItem.colour"}})],1),s("div",{staticClass:"col-2"},[s("q-input",{staticClass:"q-pb-none q-ml-sm q-mt-sm",attrs:{dense:"",outlined:"",label:"Profile"},model:{value:t.customItem.profile,callback:function(e){t.$set(t.customItem,"profile",e)},expression:"customItem.profile"}})],1),s("div",{staticClass:"col-2"},[s("q-btn",{staticClass:"q-pb-none q-ml-md q-mt-sm",attrs:{color:"primary",label:"Add"},on:{click:t.onClickAddCustomItem}})],1)]),t.form.serviceOrderCustomItems.length?s("div",{staticClass:"row q-mt-md"},t._l(t.form.serviceOrderCustomItems,(function(e){return s("div",{key:e.uuid,staticClass:"row full-width"},[s("div",{staticClass:"row full-width"},[s("div",{staticClass:"col-1"},[t._v("\n                Qty\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                Description\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Width\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Height\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Depth\n              ")]),s("div",{staticClass:"col-2"},[t._v("\n                Material\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Colour\n              ")]),s("div",{staticClass:"col-1"},[t._v("\n                Profile\n              ")]),s("q-separator",{staticClass:"q-my-sm"})],1),s("div",{staticClass:"col-1"},[s("q-input",{attrs:{dense:"",borderless:"",label:"Qty"},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",s)},expression:"serviceOrderCustomItem.quantity"}})],1),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.description)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.width)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.height)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.depth)+"\n            ")]),s("div",{staticClass:"col-2"},[t._v("\n              "+t._s(e.material)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.colour)+"\n            ")]),s("div",{staticClass:"col-1"},[t._v("\n              "+t._s(e.profile)+"\n            ")]),s("div",{staticClass:"row full-width q-mt-sm"},[s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none",attrs:{options:t.options.rootCause,label:"Root Cause",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.rootCause,callback:function(s){t.$set(e,"rootCause",s)},expression:"serviceOrderCustomItem.rootCause"}})],1),s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.byReason[e.rootCause],label:"By Reason",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.reason,callback:function(s){t.$set(e,"reason",s)},expression:"serviceOrderCustomItem.reason"}})],1),s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.byParty[e.rootCause],label:"By Party",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.party,callback:function(s){t.$set(e,"party",s)},expression:"serviceOrderCustomItem.party"}})],1),s("div",{staticClass:"col-3"},[s("q-select",{staticClass:"q-pb-none q-ml-md",attrs:{options:t.options.subReason[e.rootCause],label:"Sub Reason",outlined:"","emit-value":"","map-options":"","stack-label":""},model:{value:e.subReason,callback:function(s){t.$set(e,"subReason",s)},expression:"serviceOrderCustomItem.subReason"}})],1)]),s("div",{staticClass:"row full-width justify q-mt-sm"},[s("div",{staticClass:"col-5"},[s("div",{staticClass:"text-weight-bold text-uppercase text-grey-5"},[t._v("\n                  Remarks\n                ")]),s("q-input",{attrs:{dense:"",filled:"",type:"textarea",rules:[t.textRules]},model:{value:e.remarks,callback:function(s){t.$set(e,"remarks",s)},expression:"serviceOrderCustomItem.remarks"}})],1),s("div",{staticClass:"col-5"},[s("div",{staticClass:"text-weight-bold text-uppercase text-grey-5 q-ml-md"},[t._v("\n                  Remarks (for Factory)\n                ")]),s("q-input",{staticClass:"q-ml-md",attrs:{dense:"",filled:"",type:"textarea",rules:[t.textRules]},model:{value:e.remarksFactory,callback:function(s){t.$set(e,"remarksFactory",s)},expression:"serviceOrderCustomItem.remarksFactory"}})],1),s("q-btn",{staticClass:"col-1",attrs:{icon:"delete",color:"negative",flat:""},on:{click:function(s){return t.onDeleteCustomItem(e.uuid)}}}),s("q-separator",{staticClass:"q-my-sm"})],1)])})),0):t._e()])],1),s("q-card",{staticClass:"q-mt-md"},[s("q-card-section",[s("div",{staticClass:"col-4 q-mb-md text-weight-bold"},[t._v("\n          Attachments\n        ")]),s("div",[s("q-uploader",{staticClass:"full-width q-my-md q-mx-lg",attrs:{url:t.fileUploadUrl,label:"Upload",color:"teal",multiple:""},on:{uploaded:t.fileUploaded}})],1),t.attachments?s("q-list",{attrs:{bordered:""}},t._l(t.attachments,(function(e){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.uuid,attrs:{clickable:""},on:{click:function(s){return t.openAttachment(e.name)}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{size:"sm",name:"fas fa-paperclip"}})],1),s("q-item-section",[t._v(t._s(e.fileName))])],1)})),1):t._e()],1)],1),s("div",{staticClass:"q-mt-md",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"primary",label:"Continue"},on:{click:t.onClickContinue}})],1)],1)],1)},o=[],a=(s("e01a"),s("ddb0"),s("ded3")),l=s.n(a),r=s("c973"),n=s.n(r),c=s("007d");const m=["Human Error","Material Handling Issues","Customer Issues","Quality Issues"],u={"Human Error":["Wrong Design","Wrong Site Measurement","Item Wrong Order","Left Out Order","Delivered Wrong Item","Item short Delivered","Production Mistake","Error in Production Order"],"Material Handling Issues":["Material Damage During Delivery","Material Damage At Site","Material Damage in Packing","Item Missing At Site"],"Customer Issues":["Customer Add Order","Customer Change Design"],"Quality Issues":["Cabinet Material Defect","Accessories Defect","Production Workmanship","Installation Workmanship","Worktop Workmanship","Glass Cladding Workmanship"]},d={"Human Error":["Sales Consultant","Sales Consultant/Purchaser","Factory","Detailer"],"Material Handling Issues":["Transporter","Installer","3rd Party Contactor","Our Contractor","Unknown"],"Customer Issues":["Customer"],"Quality Issues":["Factory","Supplier","Installer","Fabricator"]},p={"Human Error":["By Section(panel processing, packing, assembly, fitting, spraying)"],"Material Handling Issues":["Packing and Delivery Section"],"Customer Issues":[],"Quality Issues":[]};var v={mixins:[c["a"]],data(){return{attachments:[],reportId:"",form:{serviceOrderItems:[],serviceOrderCustomItems:[]},inserting:{width:"",height:"",depth:"",profile:"",colour:"",material:""},selected:{category:"",subCategory:"",item:{label:"",value:"",category:"",subcategory:""}},customItem:{quantity:null,description:"",price:null,width:null,height:null,depth:null,material:"",colour:"",profile:"",selectedRootCause:"",selectedByReason:"",selectedByParty:"",selectedSubReason:"",remarks:"",remarksFactory:""},options:{category:[],subCategory:{},item:[],materials:[],colours:[],profiles:[],rootCause:m,byReason:u,byParty:d,subReason:p},serviceReportMaterials:[]}},computed:{fileUploadUrl(){return"https://api-prod.skcrm.com.my/containers/upload"},subCategoryLabel:function(){const t=this.options.subCategory[this.selected.category]||[];return`Subcategory (${t.length} options)`},itemNameLabel:function(){return`Item Name (${this.filteredItemOptions.length} options)`},materialLabel:function(){return`Material (${this.options.materials.length} options)`},colourLabel:function(){const t=this.options.colours[this.inserting.material]||[];return`Colour (${t.length} options)`},profileLabel:function(){const t=this.inserting.material.length&&this.inserting.colour.length?this.options.profiles[this.inserting.material][this.inserting.colour]:[];return`Profile (${t.length} options)`},filteredItemOptions:function(){const{category:t,subCategory:e}=this.selected;let s=this.options.item;return t&&(s=s.filter(e=>e.category===t)),e&&(s=s.filter(t=>t.subcategory===e)),s}},watch:{"selected.category":function(){this.selected.subCategory="",this.selected.item={label:"",value:""}},"selected.subCategory":function(){this.selected.item={label:"",value:""}},"inserting.material":function(){this.inserting.colour="",this.inserting.profile=""},"inserting.colour":function(){this.inserting.profile=""}},created(){var t=this;return n()((function*(){t.reportId=t.$route.params.reportId;const e={include:[{relation:"items",scope:{include:[{relation:"item"},{relation:"material"}]}},{relation:"customItems"},{relation:"submitter"},{relation:"lead"},{relation:"attachments"}]},{data:s}=yield t.$repository.serviceReport.getById(t.reportId,e),{data:i}=yield t.$repository.serviceReportItem.listing(),{data:o}=yield t.$repository.serviceReportMaterial.listing();t.serviceReportMaterials=o,t.attachments=s.attachments,t.fillExistingItemsFromServiceReport(s),t.buildServiceReportMaterialOptions(o),t.buildServiceReportItemOptions(i)}))()},methods:{openAttachment(t){const e="https://api-prod.skcrm.com.my/containers/download/"+t;window.open(e,"_blank")},fileUploaded({files:t,xhr:e}){var s=this;return n()((function*(){console.log({files:t,xhr:e});const[{name:i}]=t;try{const{files:t}=JSON.parse(e.response),[{name:o}]=t[i],a=s.reportId;if(!o)throw new Error;yield s.$repository.serviceReport.addAttachment(a,o,i);const{data:l}=yield s.$repository.serviceReport.getById(s.reportId,{include:[{relation:"attachments"}]});s.attachments=l.attachments,s.$notify("success","File upload success")}catch(o){s.$notify("error","Error uploading attachment "+i)}}))()},fillExistingItemsFromServiceReport(t){t.items&&(this.form.serviceOrderItems=t.items.map(t=>{const{material:e,colour:s,profile:i}=t.material;return t.material=e,t.colour=s,t.profile=i,t})),t.customItems&&(this.form.serviceOrderCustomItems=t.customItems)},buildServiceReportItemOptions(t){for(const e of t){const{category:t,subcategory:s}=e;t&&!this.isExistInCategoryOptions(t)&&this.options.category.push(t),s&&!this.isExistInSubCategoryOptions(t,s)&&(this.options.subCategory[t]||(this.options.subCategory[t]=[]),this.options.subCategory[t].push(s)),this.options.item.push(l()({value:e.uuid,label:e.name},e))}},buildServiceReportMaterialOptions(t){for(const{material:e}of t)this.options.materials.filter(t=>t===e).length||this.options.materials.push(e);console.log("options materials",this.options.materials);for(const{material:e,colour:s}of t)this.options.colours[e]||(this.options.colours[e]=[]),this.options.colours[e].filter(t=>t===s).length||this.options.colours[e].push(s);console.log("options colours",this.options.colours);for(const e of t){const{uuid:t,material:s,colour:i}=e,o=e.profile||"No Profiling";this.options.profiles[s]||(this.options.profiles[s]=[]),this.options.profiles[s][i]||(this.options.profiles[s][i]=[]),this.options.profiles[s][i].filter(t=>t===o).length||this.options.profiles[s][i].push({label:o,value:t})}console.log("options profiles",this.options.profiles)},isExistInCategoryOptions(t){return this.options.category.filter(e=>e===t).length>0},isExistInSubCategoryOptions(t,e){return!!this.options.subCategory[t]&&this.options.subCategory[t].filter(t=>t===e).length>0},onClickAddServiceOrderItem(t){var e=this;return n()((function*(){const[s]=e.options.item.filter(e=>e.uuid===t);if(!s)return void e.$notify("error","No item has been selected.");const{profile:i,width:o,height:a,depth:r}=e.inserting;if(!i)return void e.$notify("error","No profile has been selected.");if(!o||!a||!r)return void e.$notify("error","Dimensions data incomplete.");const{profile:n}=e.inserting;e.inserting.profile=e.serviceReportMaterials.find(t=>t.uuid===n).profile;const c=l()(l()({description:s.name,quantity:1},e.inserting),{},{rootCause:"",reason:"",subReason:"",party:"",remarks:"",remarksFactory:"",serviceReportMaterialId:n,serviceReportItemId:s.uuid});console.log("pushing into serviceOrderItems",c),e.form.serviceOrderItems.push(c),e.resetInserting(),e.$notify("success","Successfully add item")}))()},onClickAddCustomItem(){var t=this;return n()((function*(){console.log("pushing into serviceOrderCustomItems",t.customItem),t.form.serviceOrderCustomItems.push(l()({},t.customItem)),console.log(t.form.serviceOrderCustomItems),t.$notify("success","Successfully add item")}))()},onDeleteServiceOrderItem(t){this.form.serviceOrderItems=this.form.serviceOrderItems.filter(e=>e.serviceReportItemId!==t),this.$notify("success","Successfully deleted")},onDeleteCustomItem(t){this.form.serviceOrderCustomItems=this.form.serviceOrderCustomItems.filter(e=>e.uuid!==t),this.$notify("success","Successfully deleted")},onClickContinue(){var t=this;return n()((function*(){const e=t.form.serviceOrderItems.map(t=>({serviceReportItemId:t.serviceReportItemId,serviceReportMaterialId:t.serviceReportMaterialId,quantity:parseInt(t.quantity),width:t.width,height:t.height,depth:t.depth,rootCause:t.rootCause,reason:t.reason,subReason:t.subReason,party:t.party,remarks:t.remarks,remarksFactory:t.remarksFactory})),s=t.form.serviceOrderCustomItems.map(t=>({item:t.description,material:t.material,colour:t.colour,profile:t.profile,unitPrice:parseFloat(t.price),quantity:parseInt(t.quantity),width:t.width,height:t.height,depth:t.depth,rootCause:t.rootCause,reason:t.reason,subReason:t.subReason,party:t.party,remarks:t.remarks,remarksFactory:t.remarksFactory}));try{yield t.$repository.serviceReport.calculate(t.reportId,e,s),t.$notify("success","Successfully calculated")}catch(i){console.log("error SR calculate",i),t.$notify("error","Error while calculating")}}))()},resetInserting(){this.inserting={width:"",height:"",depth:"",profile:"",colour:"",material:""}}}},h=v,C=s("2877"),b=Object(C["a"])(h,i,o,!1,null,null,null);e["default"]=b.exports}}]);